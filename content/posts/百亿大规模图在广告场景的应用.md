---
title: "ç™¾äº¿å¤§è§„æ¨¡å›¾åœ¨å¹¿å‘Šåœºæ™¯çš„åº”ç”¨"
date: 2024-04-09T02:39:59+0000
tags: [ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ, åˆ°å®¶, ç®—æ³•, æœç´¢æ¨è, å¹¿å‘Š, å›¾æŠ€æœ¯, æœºå™¨å­¦ä¹ ]
---

## 1 å¼•è¨€


ç¾å›¢å¤–å–åœ¨çº¿æœåŠ¡æ­£æˆä¸ºæ—¥å¸¸ç”Ÿæ´»ä¸­å¿…ä¸å¯å°‘çš„æœåŠ¡ï¼Œå…¶ä¸­å¬å›ä½œä¸ºå¤–å–å¹¿å‘Šç³»ç»Ÿçš„ç¬¬ä¸€ä¸ªç¯èŠ‚ï¼Œä¸»è¦æ‰¿æ‹…ç€ä»æµ·é‡å•†å“ä¸­å¯»æ‰¾ä¼˜è´¨å€™é€‰çš„è§’è‰²ã€‚ç›¸æ¯”äºä¸šç•Œå¬å›ç³»ç»Ÿï¼Œå¤–å–åœºæ™¯å¬å›é˜¶æ®µå­˜åœ¨LBSé™åˆ¶ï¼Œå› æ­¤å¤–å–æœç´¢å¹¿å‘Š\[1\]æå‡ºä¾›ç»™åˆ†å±‚çš„è‡ªå¾ªç¯å¬å›ä½“ç³»ï¼šæ— ä¾›ç»™åŒºåŸŸï¼Œå®ç°æµé‡è¿è¥è”åŠ¨æå‡æµé‡å¬å›ä¸Šé™ï¼›é«˜ä¾›ç»™åŒºåŸŸï¼Œé€šè¿‡å…³é”®è¯ã€å‘é‡å¬å›æå‡å¬å›æ•ˆç‡ï¼›å¼±ä¾›ç»™åŒºåŸŸï¼Œé€šè¿‡æœç´¢æ¨èè¿›è¡Œå¼±ä¾›ç»™å¡«å……ï¼Œæé«˜å€™é€‰æ•ˆç‡ã€‚æœç´¢æ¨èç›®æ ‡æ˜¯è§£å†³ç”¨æˆ·æœç´¢æ„å›¾ä¸æ˜ç¡®ã€ä¾›ç»™å—é™åˆ¶çš„æµé‡ä¸‹ï¼Œä»æ»¡è¶³ç”¨æˆ·éœ€æ±‚çš„è§’åº¦å‡ºå‘è¿›è¡Œçš„ç”¨æˆ·\-\>ä¾›ç»™åŒ¹é…ï¼Œæé«˜å¼±ä¾›ç»™æµé‡å˜ç°æ•ˆç‡ã€ç”¨æˆ·æœç´¢æ•ˆç‡ã€‚



![](https://p0.meituan.net/travelcube/b289437d80da71cdfd7bdc9dbc089c04148816.png)



### 1.1 å¤–å–å¹¿å‘Šæœç´¢æ¨èä¸šåŠ¡åŠæŒ‘æˆ˜ä»‹ç»


ç”¨æˆ·è¿›å…¥å¤–å–åœºæ™¯ï¼Œæ•´ä½“æµè§ˆè·¯å¾„ä¸ºæ¨èé¡µã€æœç´¢é¡µï¼Œè¿›å…¥æœç´¢é¡µä¹‹åæ•´ä½“æµè§ˆè·¯å¾„ä¸ºæœç´¢å‰å¯¼è´­æ¸ é“ã€æœç´¢SUGæ¸ é“ã€ä¸»åŠ¨æœç´¢æ¸ é“ã€ç»“æœé¡µã€è¯¦æƒ…é¡µï¼Œæœç´¢æ¨èä¸»è¦ç›®æ ‡æ˜¯è§£å†³æœç´¢æ„å›¾ä¸æ˜ç¡®ã€ä¾›ç»™å—é™åˆ¶çš„å€™é€‰åŒ¹é…é—®é¢˜ï¼Œä¸»è¦è¦†ç›–æœç´¢å‰å¯¼è´­æ¸ é“ï¼ˆæœç´¢å‘ç°ï¼‰ã€æœç´¢SUGæ¸ é“ã€ç»“æœé¡µã€POI\+SPUã€‘ç»„åˆæ¨èã€ç»“æœé¡µç›¸å…³å¡«å……ç­‰åœºæ™¯ã€‚



![](https://p0.meituan.net/travelcube/c1ac0872be2a8f66622ba7e132197a401397011.png)



æœç´¢æ¨èè¦†ç›–å¦‚ä¸Šå¤šä¸ªåœºæ™¯ï¼Œå…·æœ‰åœºæ™¯å¤šä¸”åœºæ™¯è¾“å…¥äº¤äº’å’Œå±•ç°å½¢æ€å¼‚æ„çš„ç‰¹ç‚¹ï¼Œç¬¬ä¸€ä¸ªæŒ‘æˆ˜æ˜¯å¦‚ä½•ç»Ÿä¸€å»ºæ¨¡å¼‚æ„å¤šåœºæ™¯ä¸šåŠ¡ï¼Œæé«˜å¼±ä¾›ç»™åŒ¹é…æ•ˆç‡ï¼ˆå¤šæ¸ é“ï¼‰ ã€‚å¤–å–ç”¨æˆ·éœ€æ±‚å˜åŒ–å¤šæ ·ï¼Œä»ç”¨æˆ·è¡Œä¸ºä¸­å¯ä»¥å‘ç°ï¼Œç”¨æˆ·æœ‰åœ¨ä¸åŒåœºæ™¯ä¹‹é—´æ¯”è¾ƒï¼Œéœ€æ±‚å‘ç”Ÿæ¼”åŒ–è‡³é€æ¸æ”¶æ•›çš„ç‰¹ç‚¹ï¼Œä¾‹å¦‚ç”¨æˆ·ä»æ¨èè½¬æœç´¢ã€æœç´¢æ¢Queryã€ç»“æœé¡µåå¤å¯¹æ¯”ã€æœ€ç»ˆæˆå•æˆ–è€…ç¦»å¼€ï¼Œç¬¬äºŒä¸ªæŒ‘æˆ˜æ˜¯å¦‚ä½•å®æ—¶ã€å‡†ç¡®æ•æ‰ç”¨æˆ·éœ€æ±‚çš„æ¼”å˜ï¼Œå®Œæˆç”¨æˆ·ä¸ä¾›ç»™çš„é«˜æ•ˆåŒ¹é…ï¼ˆå³æ—¶åŒ–ï¼‰ã€‚



é’ˆå¯¹æœç´¢æ¨èä¸šåŠ¡å¤šæ¸ é“ã€å³æ—¶åŒ–ç‰¹ç‚¹ï¼Œä¸šç•Œè¯­ä¹‰å‘é‡å¬å›ã€ä¸ªæ€§åŒ–å‘é‡å¬å›ä¸€èˆ¬è§£å†³æ–¹æ¡ˆå’Œé—®é¢˜æ˜¯ï¼š



* é’ˆå¯¹è¾“å…¥äº¤äº’å’Œå±•ç°å½¢æ€å·®å¼‚è¾ƒå¤§çš„å¤šç§å¼‚æ„ä¸šåŠ¡ï¼Œä¸åŒä¸šåŠ¡æ ·æœ¬ç»„ç»‡æ–¹å¼å·®å¼‚è¾ƒå¤§ï¼Œç”±äºå‘é‡å¬å›ä»¥çº¿æ€§æ–¹å¼ç»„ç»‡æ ·æœ¬ï¼Œå¯¼è‡´å¼‚æ„ä¸šåŠ¡æ ·æœ¬éš¾ä»¥ç»Ÿä¸€ï¼Œå› æ­¤ä¸€èˆ¬æ¯ä¸ªå‘é‡æ¨¡å‹åŸºäºå½“å‰åœºæ™¯æ•°æ®æˆ–è€…å¤šåœºæ™¯æ•°æ®è¿›è¡Œå•åœºæ™¯ç²¾ç»†åŒ–å»ºæ¨¡ï¼Œå­˜åœ¨è¿­ä»£æ•ˆç‡ä½ã€å°åœºæ™¯è¿ç§»èƒ½åŠ›å¼±çš„é—®é¢˜ï¼›
* é€šè¿‡é•¿çŸ­æœŸåºåˆ—å»ºæ¨¡ï¼Œç²¾ç»†åŒ–åˆ»ç”»åœ¨ä¸åŒæ—¶æ®µå†…ç”¨æˆ·éœ€æ±‚å˜åŒ–å…³ç³»ã€‚æ—¶é—´æ®µåˆ’åˆ†çš„åºåˆ—å†…ï¼Œå­˜åœ¨æ•°æ®ç¨€ç–æ€§é«˜ã€å…´è¶£åœˆå°é—­ã€å…´è¶£æ¼”å˜åˆ»ç”»ç²’åº¦ç²—çš„é—®é¢˜ã€‚


æœç´¢æ¨èä¸šåŠ¡çš„å¤šä¸ªåœºæ™¯è¾“å…¥äº¤äº’å’Œå±•ç°å½¢æ€å·®å¼‚è¾ƒå¤§ï¼Œéš¾ä»¥åº”ç”¨ä¼ ç»Ÿçš„å…·æœ‰ç›¸åŒç›®æ ‡ã€ç›¸ä¼¼ç‰¹å¾çš„å¤šåœºæ™¯ä¸ªæ€§åŒ–å‘é‡å¬å›å»ºæ¨¡æ–¹æ³•ï¼Œå›¾ç»“æ„ä½œä¸ºå¤šç»´éè§„åˆ™ç«‹ä½“ç»“æ„ï¼Œç”±å¤šç§å¼‚æ„ç±»å‹èŠ‚ç‚¹å’ŒèŠ‚ç‚¹é—´å…³ç³»ç»„æˆï¼Œé€‚åˆé€šè¿‡å¼‚æ„å›¾ç»Ÿä¸€æœç´¢æ¨èå¤šå¼‚æ„åœºæ™¯ã€‚



å›¾æŠ€æœ¯å…·æœ‰å¼‚æ„èŠ‚ç‚¹å…³ç³»å…³è”èƒ½åŠ›ã€é«˜é˜¶å…³ç³»èšåˆèƒ½åŠ›ã€ç¨€ç–èŠ‚ç‚¹é«˜é˜¶è¡¨å¾çš„ç‰¹ç‚¹ï¼Œé€šè¿‡å…³ç³»èšåˆã€å…³è”èƒ½åŠ›ç¼“è§£å°åœºæ™¯éš¾ä»¥å­¦å¥½ã€ç¨€ç–èŠ‚ç‚¹éš¾ä»¥è¡¨å¾å¥½çš„é—®é¢˜ï¼Œå› æ­¤æˆ‘ä»¬æå‡ºå¤šåœºæ™¯å¼‚æ„å¤§å›¾ç»Ÿä¸€å»ºæ¨¡è§£å†³æœç´¢æ¨èæ¸ é“å¤šå¸¦æ¥çš„è¿­ä»£æ•ˆç‡ä½ã€å¼‚æ„åœºæ™¯éš¾ä»¥ç»Ÿä¸€ã€å°åœºæ™¯éš¾ä»¥å­¦å¥½çš„é—®é¢˜ã€‚ç”¨æˆ·éœ€æ±‚å…·æœ‰ä¸åŒåœºæ™¯é—´ç›¸äº’æ¯”è¾ƒï¼Œéœ€æ±‚æ¼”å˜è‡³é€æ¸æ”¶æ•›çš„ç‰¹ç‚¹ï¼Œè¿™ç§å³æ—¶æ€§çš„å˜åŒ–ç‰¹ç‚¹ï¼Œæˆ‘ä»¬ä»¥å¤šåœºæ™¯å¼‚æ„å¤§å›¾ä¸ºåŸºåº§æå‡ºå¼‚æ„åŠ¨æ€å›¾åœ¨çº¿å»ºæ¨¡åˆ»åŒ–éœ€æ±‚æ¼”å˜å…³ç³»ï¼Œè§£å†³å…´è¶£æ¼”å˜åˆ»ç”»ç²—ã€æ•°æ®ç¨€ç–æ€§é«˜çš„é—®é¢˜ã€‚



### 1.2 å›¾æŠ€æœ¯å’Œå¼•æ“ä»‹ç»


æœ€è¿‘å‡ å¹´å·¥ä¸šç•Œå’Œå­¦æœ¯ç•Œåœ¨å›¾é¢†åŸŸç ”ç©¶å–å¾—äº†ä¸é”™çš„è¿›å±•ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œå¯¹å›¾æ·±åº¦å­¦ä¹ çš„èŒƒå¼æ¼”è¿›ã€ä¸»æµç ”ç©¶æ–¹å‘ã€å›¾å¼•æ“å‘å±•è¿›è¡Œæ¢³ç†\[2\]\[3\]\[4\]\[5\]\[6\]\[7\]ã€‚



å›¾ç¥ç»ç½‘ç»œèŒƒå¼æ¼”è¿›ä¸»è¦ç”±åŸºäºå›¾æ¸¸èµ°çš„æ— ç›‘ç£èŒƒå¼\-\>åŸºäºèšåˆçš„æ¶ˆæ¯ä¼ é€’èŒƒå¼\-\>ä¸‹ä¸€ä»£èŒƒå¼ï¼Œä»æµ…å±‚æ— ç›‘ç£æ·±åº¦å­¦ä¹ åˆ°ç»Ÿä¸€å…¨åœºæ™¯å›¾æ·±åº¦å­¦ä¹ å‘å±•ã€‚åœ¨ä¸»æµçš„åŸºäºèšåˆçš„æ¶ˆæ¯ä¼ é€’èŒƒå¼ä¸‹ï¼Œä¸»è¦ç ”ç©¶æ–¹å‘åˆ†ä¸ºæ¶ˆæ¯ä¼ é€’å‡½æ•°è®¾è®¡ã€æ„å›¾è®¾è®¡ã€å›¾é¢„è®­ç»ƒã€è”åˆè®­ç»ƒã€åŠ¨æ€å›¾ç­‰ä¸»æµæ–¹å‘ã€‚



å›¾ç¥ç»ç½‘ç»œèŒƒå¼æ¼”è¿›å†³å®šäº†æœªæ¥èµ°å‘å›¾å¤šä»»åŠ¡ç»Ÿä¸€æ–¹å‘ï¼Œæˆ‘ä»¬æœŸæœ›åœ¨èŒƒå¼æ¼”è¿›è·¯çº¿ä¸Šæ‰¾åˆ°æœç´¢æ¨èä¸šåŠ¡å¦‚ä½•ç»Ÿä¸€å»ºæ¨¡å¤šåœºæ™¯å¼‚æ„ä¸šåŠ¡ï¼›æ¶ˆæ¯èšåˆèŒƒå¼ä¸‹åŠ¨æ€å›¾ã€è”åˆè®­ç»ƒæ–¹å‘ä¸»è¦è§£å†³å›¾æ–°å¢èŠ‚ç‚¹ã€æ–°å¢å˜åŒ–å…³ç³»å¦‚ä½•åˆ»ç”»ï¼Œæˆ‘ä»¬æœŸæœ›åœ¨åŠ¨æ€å›¾æ–¹å‘æ‰¾åˆ°å»ºæ¨¡ç”¨æˆ·éœ€æ±‚å˜åŒ–å…³ç³»çš„æ–¹æ¡ˆã€‚



![](https://p1.meituan.net/travelcube/fa044a2d642ef3317cfdcfcb659e912f295974.png)



ç›¸æ¯”ä¼ ç»Ÿæ·±åº¦å­¦ä¹ å¼•æ“ï¼Œå›¾å­¦ä¹ å¼•æ“éœ€è¦å…·å¤‡å›¾æ„å»ºã€å›¾é‡‡æ ·å’Œå›¾è¿ç®—çš„èƒ½åŠ›ã€‚éšç€å›¾æŠ€æœ¯å‘å±•è¶Šæ¥è¶Šç«çƒ­ï¼Œå›¾æŠ€æœ¯ç”±å­¦æœ¯ç•Œé€æ¸æ¨å¹¿åˆ°å·¥ä¸šç•Œï¼Œå¼•æ“å‘å±•ç”±æ”¯æŒå›¾æŠ€æœ¯åŸºæœ¬åŠŸèƒ½å‘æ›´é«˜æ•ˆçš„æ”¯æŒå¤§è§„æ¨¡å›¾æ–¹å‘å‘å±•ã€‚å½“å‰å·²æœ‰å¾ˆå¤šé’ˆå¯¹ä¸åŒåœºæ™¯çš„å¼€æºå›¾è®­ç»ƒå¼•æ“\[8\]\[9\]ã€‚å›¾å­¦ä¹ ä¸šåŠ¡åœºæ™¯çš„å›¾æ¨¡å‹è§„æ¨¡è¶Šæ¥è¶Šå¤§ï¼Œè®­ç»ƒæ—¶é—´ä¹Ÿè¶Šæ¥è¶Šé•¿ï¼Œå› æ­¤è®­ç»ƒå¼•æ“\[8\]\[9\]éœ€è¦åŒæ—¶æ”¯æŒè¾ƒå¤§çš„å›¾è§„æ¨¡ç«¯åˆ°ç«¯è®­ç»ƒå’Œè¾ƒå¿«çš„è®­ç»ƒé€Ÿåº¦ã€‚



åœ¨å½“å‰å¼€æºçš„æ¡†æ¶ä¸­ï¼Œå•æœºçš„è®­ç»ƒå¼•æ“å¯ä»¥å‘æŒ¥GPUçš„è®¡ç®—ä¼˜åŠ¿ï¼Œä½†æ˜¯å­˜å‚¨æœ‰é™ï¼Œæ— æ³•æ”¯æ’‘ä¸šåŠ¡TBçº§åˆ«å†…å­˜å’Œæ¨¡å‹å‚æ•°çš„å¤§è§„æ¨¡å›¾å­¦ä¹ è®­ç»ƒä»»åŠ¡ã€‚åˆ†å¸ƒå¼çš„è®­ç»ƒå¼•æ“å¯ä»¥é€šè¿‡æ¨ªå‘æ‰©å±•æ¥æ”¯æŒå¤§è§„æ¨¡çš„å›¾å­¦ä¹ ä»»åŠ¡ï¼Œä½†æ˜¯ä¼˜åŒ–å¤šæœºå›¾é‡‡æ ·ä¹‹é—´éœ€è¦è¿›è¡Œå¯†é›†çš„é€šä¿¡é€ æˆç“¶é¢ˆï¼Œä½¿å¾—å„å°æœºå™¨éƒ½æ— æ³•å‘æŒ¥GPUçš„è®¡ç®—èƒ½åŠ›ï¼Œå¯¼è‡´è®­ç»ƒé€Ÿåº¦éš¾ä»¥æ»¡è¶³å·¥ä¸šç•Œéœ€æ±‚ã€‚å› æ­¤æˆ‘ä»¬è”åˆç¾å›¢æœºå™¨å­¦ä¹ å¹³å°å»ºè®¾äº†ä¸€å¥—å›¾å­¦ä¹ è®­ç»ƒå¼•æ“ï¼Œèƒ½å¤ŸåŒæ—¶æ»¡è¶³é€Ÿåº¦å’Œè§„æ¨¡ä¸¤æ–¹é¢çš„éœ€æ±‚ã€‚



## 2 å¼‚æ„å¤§å›¾åœ¨æœç´¢æ¨èä¸šåŠ¡çš„æ¼”è¿›


æˆ‘ä»¬æå‡ºå¤šåœºæ™¯å¼‚æ„å¤§å›¾ç»Ÿä¸€å»ºæ¨¡è§£å†³æœç´¢æ¨èæ¸ é“å¤šå¸¦æ¥çš„è¿­ä»£æ•ˆç‡ä½ã€å¼‚æ„åœºæ™¯éš¾ä»¥ç»Ÿä¸€ã€å°åœºæ™¯éš¾ä»¥å­¦å¥½çš„é—®é¢˜ã€‚ç”¨æˆ·éœ€æ±‚å…·æœ‰ä¸åŒåœºæ™¯é—´ç›¸äº’æ¯”è¾ƒï¼Œéœ€æ±‚æ¼”å˜è‡³é€æ¸æ”¶æ•›çš„ç‰¹ç‚¹ï¼Œè¿™ç§å³æ—¶æ€§çš„å˜åŒ–ç‰¹ç‚¹ï¼Œæˆ‘ä»¬ä»¥å¤šåœºæ™¯å¼‚æ„å¤§å›¾ä¸ºåŸºåº§æå‡ºå¼‚æ„åŠ¨æ€å›¾åœ¨çº¿å»ºæ¨¡åˆ»åŒ–éœ€æ±‚æ¼”å˜å…³ç³»ï¼Œå¦‚ä¸‹é˜è¿°å¤šåœºæ™¯å¼‚æ„å¤§å›¾å’Œå¼‚æ„åŠ¨æ€å›¾åœ¨çº¿å»ºæ¨¡çš„è¿­ä»£æ¼”è¿›ã€‚



### 2.1 å¤–å–å¤šåœºæ™¯å¼‚æ„å¤§å›¾


ä»ä¸šåŠ¡é€æ­¥æ‰©å¢ã€åŸºå»ºé€æ¸å®Œå–„ã€æŠ€æœ¯é€æ¸å‘å±•çš„ç°çŠ¶ï¼Œæˆ‘ä»¬å¤šåœºæ™¯å¼‚æ„å¤§å›¾ç”±å•åœºæ™¯ç²¾ç»†åŒ–å›¾å»ºæ¨¡\-\>å¤šåœºæ™¯ç»Ÿä¸€çš„å¤§å›¾é¢„è®­ç»ƒ\+ä¸‹æ¸¸ä»»åŠ¡å¾®è°ƒ\-\>è”åˆGPTå¢å¼ºå¼æ£€ç´¢çš„å¤§å›¾é¢„è®­ç»ƒ\+ä¸‹æ¸¸ä»»åŠ¡Promptå¾®è°ƒè¿›è¡Œè¿­ä»£ï¼Œæœ€ç»ˆæ„å»ºå¤–å–é¢†åŸŸGraphæ¨¡å‹ã€‚



![](https://p0.meituan.net/travelcube/396e30a5aef23c63c3db60f166f7d481189224.png)



éšç€è¿­ä»£çš„å‘å±•åŠæ•°æ®è§„æ¨¡çš„å˜åŒ–ï¼Œå›¾å¼•æ“çš„æŠ€æœ¯èƒ½åŠ›éœ€è¦ç”±æ”¯æŒå°è§„æ¨¡å›¾å¿«é€Ÿè¿­ä»£ï¼Œåˆ°æ”¯æŒç™¾äº¿è¾¹å›¾è§„æ¨¡ã€å…¨å‚æ•°ç«¯åˆ°ç«¯è®­ç»ƒï¼Œæœ€ç»ˆå®ç°æ”¯æŒåƒäº¿è¾¹è§„æ¨¡é¢†åŸŸå¤§å›¾è®­ç»ƒèƒ½åŠ›çš„è·¨è¶Šã€‚è½åœ°äºæœç´¢å‰å¯¼è´­æ¸ é“ï¼ˆæœç´¢å‘ç°ï¼‰ã€ç»“æœé¡µã€POI\+SPUã€‘ç»„åˆæ¨èã€ç»“æœé¡µç›¸å…³å¡«å……ç­‰å¤šä¸ªåœºæ™¯ï¼Œå–å¾—äº†è¾ƒä¸ºæ˜æ˜¾çš„ä¸šåŠ¡æ•ˆæœï¼›åœ¨å­¦æœ¯å±‚é¢ï¼Œç›¸å…³è®ºæ–‡å·²è¢«CIKM 2023æ”¶å½•ã€‚



#### 2.1.1 å•åœºæ™¯å›¾å»ºæ¨¡


**åŸºäºEMï¼ˆExpectation Maximizationï¼‰æ¡†æ¶çš„å•æ„å›¾è¯­è¨€å¢å¼ºé™å™ªå›¾**



**èƒŒæ™¯**ï¼šå°†ä¹‹å‰çš„å›¾ç¥ç»ç½‘ç»œç›´æ¥åº”ç”¨äºè¯¥å¼‚æ„å›¾å®½æ³›æ£€ç´¢ä»»åŠ¡ä¼šé‡åˆ°å™ªå£°äº¤äº’ã€‚å™ªå£°äº¤äº’ä¸»è¦æ¥æºäºç”¨æˆ·çš„éšæœºè¯¯ç‚¹ï¼ˆä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªæŸ¥è¯¢ä¸­å…±åŒç‚¹å‡»â€œæ±‰å ¡â€å’Œâ€œæ²™æ‹‰â€ï¼‰ä»¥åŠå…¨åœºæ™¯è¡Œä¸ºåºåˆ—ä¹‹é—´Sessionï¼ˆç”¨æˆ·åœ¨æœç´¢å¼•æ“ä¸­ä»å¼€å§‹åˆ°ç»“æŸçš„è¿ç»­è¡Œä¸ºï¼‰ç‚¹å‡»ï¼ˆä¾‹å¦‚ï¼Œâ€œè‚¯å¾·åŸºâ€å’Œâ€œæµ·åº•æâ€ï¼‰ï¼Œä»¥åŠç”±äºæ¶ˆæ¯ä¼ é€’æ–¹æ¡ˆæ›´å®¹æ˜“å—åˆ°å™ªå£°çš„å½±å“ã€‚



**åŠ¨ä½œ**ï¼šä¹‹å‰å·¥ä½œä¸»è¦èšç„¦äºç»“æ„ç›¸ä¼¼æ€§æˆ–è€…åŸºäºè§„åˆ™çš„è¯­ä¹‰ç›¸ä¼¼æ€§é™å™ªï¼Œä¸åŒå±‚é¢å­˜åœ¨ç¨€ç–è¡¨ç¤ºå’ŒèŠ‚ç‚¹è¦†ç›–é—®é¢˜ï¼Œå› æ­¤æˆ‘ä»¬æå‡ºåŸºäºå˜åˆ†EMæ¡†æ¶è¿›è¡ŒLMå’ŒGNNè”åˆè®­ç»ƒï¼Œé€šè¿‡è”åˆè®­ç»ƒèåˆç»“æ„å’Œè¯­ä¹‰ä¿¡æ¯è¿›è¡Œå›¾ç»“æ„é™å™ªã€‚å…·ä½“è€Œè¨€ï¼Œåœ¨å•æ„å›¾å»å™ªä¸­ï¼Œæˆ‘ä»¬åŸºäºLMsï¼ˆï¼ˆLanguage Modelsï¼‰ä¼°è®¡æ¯æ¬¡å›¾äº¤äº’çš„å¯é æ€§ç¨‹åº¦ï¼Œå¹¶åŸºäºå¯é åº¦ä¸ºGNNs\(Graph Neural Networks\)è®¾è®¡äº†ç¡¬å»å™ªå’Œè½¯å»å™ªç­–ç•¥ï¼Œå¦‚ä¸‹å…¬å¼æ‰€è¿°ï¼Œæ­¤å¤–ç”¨å˜åˆ†EMæ¡†æ¶å°†è¯­è¨€æ¨¡å‹å’Œå›¾ç¥ç»ç½‘ç»œç»“åˆèµ·æ¥ï¼Œä»¥é¿å…è”åˆè®­ç»ƒéœ€è¦ä¸å¯æ‰¿å—çš„è®¡ç®—æˆæœ¬ï¼Œæœ€ç»ˆé€šè¿‡è”åˆè®­ç»ƒèåˆç»“æ„å’Œè¯­ä¹‰ä¿¡æ¯è¿›è¡Œé™å™ªã€‚



**ç»“æœ**ï¼šEMè”åˆè®­ç»ƒå’Œè½¯ç¡¬é™ç‡¥ï¼ˆå¯¹æ¯”åªæœ‰ç¡¬é™ç‡¥å›¾ï¼‰å¸¦æ¥ç¦»çº¿Recall \+3.7%ã€‚



![](https://p0.meituan.net/travelcube/fdf07a158d5f1994b025b54960d548cf68306.png)



![](https://p0.meituan.net/travelcube/c9e365a4dcaa486fd41bbae9084b0018103460.png)



![](https://p0.meituan.net/travelcube/8fb38d2f556ebc9ca547e22566bac327139010.png)



**åŸºäºå¯¹æ¯”å­¦ä¹ çš„å¤šæ„å›¾å·®å¼‚åŒ–å»ºæ¨¡**



**èƒŒæ™¯**ï¼šå°†ä¹‹å‰çš„å›¾ç¥ç»ç½‘ç»œç›´æ¥åº”ç”¨äºè¯¥å¼‚æ„å›¾å®½æ³›æ£€ç´¢ä»»åŠ¡ä¼šé‡åˆ°æ„å›¾ä¸å¯åŒºåˆ†æ€§çš„é—®é¢˜ã€‚ç”¨æˆ·æœç´¢è¯è¡¨è¾¾äº†å¤šç§å¤šæ ·çš„æ„å›¾ï¼Œå¯¹äºåŒä¸€ä¸ªæ›å…‰å¡ç‰‡ï¼Œå…·æœ‰ä¸åŒæ„å›¾çš„ç”¨æˆ·å¯èƒ½ä¼šå…³æ³¨ä¸åŒéƒ¨åˆ†ï¼ˆèœå“ã€å•†å®¶ç­‰ï¼‰ï¼Œä½†æ˜¯ç°æœ‰çš„å›¾ç¥ç»ç½‘ç»œé€šå¸¸å¿½ç•¥æ„å›¾ä¹‹é—´çš„å·®å¼‚ç»Ÿä¸€å»ºæ¨¡ã€‚



**åŠ¨ä½œ**ï¼šæˆ‘ä»¬æå‡ºå¤šæ„å›¾å·®å¼‚åŒ–å»ºæ¨¡ï¼Œé€šè¿‡å¤šæ„å›¾å¯¹æ¯”å­¦ä¹ æ–¹å¼è§£å†³ä¹‹å‰å¿½è§†æ„å›¾ä¹‹é—´å·®å¼‚æ€§é—®é¢˜ã€‚å…·ä½“çš„æˆ‘ä»¬åœ¨è¯­è¨€æ¨¡å‹ï¼ˆLMsï¼‰ä¸­å¼•å…¥äº†æ„å›¾æ„ŸçŸ¥èŠ‚ç‚¹ï¼Œèƒ½å¤Ÿä¸ºåŒä¸€ä¸ªèŠ‚ç‚¹è·å¾—ä¸åŒæ„å›¾è¡¨ç¤ºã€‚GNNsä¸­é€šè¿‡è®¾è®¡èšåˆå‡½æ•°è®©æ¯ä¸ªæ„å›¾èŠ‚ç‚¹æ›´å¤šåœ°å…³æ³¨æ¥è‡ªå…·æœ‰ç›¸åŒæ„å›¾çš„è¾¹çš„é‚»å±…èŠ‚ç‚¹ï¼ˆå…¬å¼å¦‚ä¸‹ï¼‰ã€‚æœ€åæå‡ºäº†ä¸€ä¸ªå¤šæ„å›¾å¯¹æ¯”å­¦ä¹ ç›®æ ‡ï¼ˆå…¬å¼å¦‚ä¸‹ï¼‰ï¼Œä»¥æ˜ç¡®è€Œæœ‰æ•ˆåœ°æŒ‡å¯¼å›¾æ¨¡å‹æ˜¾ç¤ºå»ºæ¨¡ä¸åŒæ„å›¾çš„å·®å¼‚æ€§ã€‚è¯¦ç»†ä¿¡æ¯å¯ä»¥å»é˜…è¯»æˆ‘ä»¬çš„è®ºæ–‡LEAD\-ID\[10\]ã€‚



**ç»“æœ**ï¼šå¤šæ„å›¾å¯¹æ¯”å­¦ä¹ å¸¦æ¥ç¦»çº¿Recall \+ 1.8%ï¼Œå¤šæ„å›¾è¡¨å¾å¸¦æ¥ç¦»çº¿å¤šä¸šåŠ¡å¹³å‡Recall \+ 3.8%ã€‚



![](https://p0.meituan.net/travelcube/fddfb475d2df27cc3f1bd69c8101066f43185.png)



å…¶ä¸­$wÂ·$æ˜¯å‚æ•°ï¼Œ$ğ‘† \(ğ‘¢, ğ‘£\)$è¡¨ç¤ºè¾¹$\(ğ‘¢, ğ‘£\)$çš„æ„å›¾ï¼›è¯·æ³¨æ„ï¼Œå›¾ç¥ç»ç½‘ç»œï¼ˆGNNsï¼‰åªèšåˆç›¸åŒæ„å›¾çš„é‚»å±…çš„è¡¨ç¤ºï¼Œå³$\\mathrm{h}\_{u\(s\)}^{\(k\-1\)}$ ã€‚



![](https://p0.meituan.net/travelcube/32f7a5e4846ee891b3d9704f4812aa9530356.png)



![](https://p0.meituan.net/travelcube/c8a7f48b44264a155ed9025c2392392974457.png)



#### 2.1.2 WMå¤šåœºæ™¯å¤§å›¾é¢„è®­ç»ƒ


**WMå¤§å›¾æ„å»º**



æˆ‘ä»¬ä»¥å¤–å–å…¨åœºæ™¯ä½œä¸ºæ•°æ®æºè¿›è¡Œå¼‚æ„ç±»å‹æ„å›¾ï¼Œå®ç°ä¸€ä¸ªå¤§å›¾æ”¯æŒå¤šåœºæ™¯å¤šä¸šåŠ¡ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬ä»¥ç”¨æˆ·ç”»åƒã€ç”¨æˆ·å…¨è¡Œä¸ºåºåˆ—ã€æœç´¢ç‚¹å‡»åºåˆ—Sessionå†…åºåˆ—ç­‰ä¸ºæ•°æ®æºè¿›è¡Œå¤§å›¾æ„å›¾ï¼›å•†å“ä½œä¸ºå¤šåœºæ™¯å…±æ€§è¿æ¥èŠ‚ç‚¹ï¼Œè‡ªå®šä¹‰ä¸šMeta\-pathä½œä¸ºå•åœºæ™¯å­å›¾æ„å»ºæ–¹æ³•ï¼Œæ„å»ºå…·æœ‰å®é™…ä»»åŠ¡æ„ä¹‰çš„æœç´¢å•†å“å­å›¾ã€æœç´¢å•†æˆ·å­å›¾ã€ç”¨æˆ·å•†å“å­å›¾ç­‰ã€‚



![](https://p0.meituan.net/travelcube/5bfbdf08da204df944dc5f170f2b85c7501628.png)



å…¶ä¸­å›¾èŠ‚ç‚¹åŒ…Userã€Itemã€POIã€æœç´¢è¯ï¼›è¾¹åŒ…æ‹¬Userç‚¹å‡»ã€æˆItemï¼Œæœç´¢è¯ç‚¹å‡»ã€æˆå•ã€åŠ è´­itemã€POIï¼Œç”¨æˆ·åºåˆ—Itemã€POIçš„Sessionå†…ç‚¹å‡»ã€æˆå•ç­‰ï¼›å¤§å›¾æ•´ä½“è§„æ¨¡äº¿èŠ‚ç‚¹ã€ç™¾äº¿è¾¹ã€‚



**å¤šåœºæ™¯ç»Ÿä¸€å¤§å›¾é¢„è®­ç»ƒ**



**èƒŒæ™¯**ï¼šä¸ºäº†å®ç°ä¸€ä¸ªå¤§å›¾æ”¯æŒå¤šåœºæ™¯å¤šä¸šåŠ¡ï¼Œæé«˜è¿­ä»£æ•ˆç‡ï¼Œæˆ‘ä»¬åœ¨è¯­ä¹‰è”åˆå¢å¼ºå›¾é™å™ªç½‘ç»œåŸºç¡€ä¸Šè¿›è¡Œç»Ÿä¸€å¤šåœºæ™¯å¤§å›¾é¢„è®­ç»ƒã€‚ç›¸æ¯”äºä¸Šè¿°å•åœºæ™¯è¯­è¨€å¢å¼ºé™å™ªå›¾ï¼Œå¤§å›¾é¢„è®­ç»ƒä¸»è¦æŒ‘æˆ˜ä¸ºå¦‚ä½•è¿›è¡Œå¤šåœºæ™¯çš„è¯­è¨€æ¨¡å‹å’Œå›¾æ¨¡å‹é¢„è®­ç»ƒã€‚



**åŠ¨ä½œ**ï¼šè¯­è¨€æ¨¡å‹é‡‡ç”¨BERTä¸ºBaseï¼Œé‡‡ç”¨åº•å±‚å¤šåœºShare\-bottomå…±äº«ï¼Œé¡¶å±‚å¼‚æ„èŠ‚ç‚¹å·®å¼‚åŒ–å»ºæ¨¡ç»Ÿä¸€æœç´¢æ¨èå¤šä¸ªåœºæ™¯ï¼Œè·å¾—å¤šç§ç±»å‹èŠ‚ç‚¹è¡¨å¾ã€‚ç»Ÿä¸€å¤§å›¾é¢„è®­ç»ƒé˜¶æ®µæ— å·®å¼‚æ€§é«˜é˜¶èšåˆæ‰€æœ‰é‚»å±…èŠ‚ç‚¹å¿…ç„¶å¸¦æ¥å™ªå£°å¹²æ‰°ï¼Œå› æ­¤æˆ‘ä»¬é€šè¿‡è‡ªå®šä¹‰åœºæ™¯Meta\-pathæ˜¾ç¤ºå®šä¹‰åœºæ™¯å­å›¾ï¼Œå¤šåœºæ™¯å­å›¾å†…è¿›è¡Œé«˜é˜¶èšåˆã€å¤šåœºæ™¯å­å›¾é—´åº•å±‚å…±äº«èŠ‚ç‚¹è¡¨å¾ã€‚æ¨¡å‹ä»¥æ— ç›‘ç£é“¾æ¥é¢„æµ‹ä»»åŠ¡ä½œä¸ºç›®æ ‡ï¼Œé€šè¿‡LMså’ŒGNNsè”åˆè®­ç»ƒè¿›è¡Œç»Ÿä¸€å¤§å›¾é¢„è®­ç»ƒä»»åŠ¡ã€‚



**ç»“æœ**ï¼šä¼˜åŒ–å¤šä»»åŠ¡æ ·æœ¬æ··åˆæ¯”ä¾‹ç¦»çº¿å¤šä»»åŠ¡å¹³å‡Recall \+ 4%ã€‚



#### 2.1.3 ç”Ÿæˆå¼æ¨¡å‹å¢å¼ºçš„å¤§å›¾é¢„è®­ç»ƒã€Promptå¾®è°ƒ


**èƒŒæ™¯**ï¼šä¸Šè¿°ç»Ÿä¸€å¤šåœºæ™¯å¤§å›¾é¢„è®­ç»ƒ\+FinetuneèŒƒå¼ä¸»è¦æœ‰å‡ ä¸ªé—®é¢˜ï¼Œé¦–å…ˆé¢„è®­ç»ƒä»»åŠ¡å’Œä¸‹æ¸¸ä»»åŠ¡ä¹‹é—´å›ºæœ‰çš„è®­ç»ƒç›®æ ‡æœ‰å·®è·ï¼Œå¯¼è‡´é¢„è®­ç»ƒæ— æ³•æœ€å¤§åŒ–å‘æŒ¥èƒ½åŠ›ï¼Œå…¶æ¬¡æ­¤èŒƒå¼ä¸‹æ¯ä¸ªä»»åŠ¡éƒ½éœ€è¦å¤§é‡æ ·æœ¬æœ‰ç›‘ç£è®­ç»ƒï¼Œå¾®è°ƒæˆæœ¬é«˜ä¸”æ–°ä»»åŠ¡æ³›åŒ–èƒ½åŠ›å¼±ï¼Œåœ¨PromptèŒƒå¼ä¹‹å‰ï¼Œå¤šåœºæ™¯è®­ç»ƒæ–¹æ³•é›†ä¸­åœ¨æ¨¡å‹æ¡†æ¶ç»“æ„ä¼˜åŒ–ï¼Œè®¾è®¡å¤æ‚ä¸”å¯è¿ç§»æ€§å¼±ï¼Œå› æ­¤å€Ÿé‰´GPTæ–°èŒƒå¼è®¾è®¡å›¾é¢†åŸŸç»Ÿä¸€å¤šåœºæ™¯æ¨¡å‹ã€‚



**åŠ¨ä½œ**ï¼šç”Ÿæˆå¼æ¨¡å‹å®ç°è¯­ä¹‰ç†è§£æ¨¡å‹å…·æœ‰ç»Ÿä¸€å¤šåœºæ™¯ä»»åŠ¡è®¾è®¡ç®€å•ã€å¯è¿ç§»æ€§å¼ºç­‰ä¼˜ç‚¹ï¼Œå› æ­¤é€šè¿‡ç”Ÿæˆå¢å¼ºæ£€ç´¢ï¼ˆGARï¼‰æ–¹å¼è¿›è¡Œæœç´¢æ¨èå¤šåœºæ™¯è¯­ä¹‰æ¨¡å‹è®¾è®¡ï¼Œç„¶åé€šè¿‡GARç”Ÿæˆå¼æ£€ç´¢æ¨¡å‹å’ŒGNNè”åˆè®­ç»ƒè¿›è¡Œç»Ÿä¸€å¤§å›¾é¢„è®­ç»ƒä»»åŠ¡ã€‚å…·ä½“è€Œè¨€ï¼ŒGARé€šè¿‡åº•å±‚å…±äº«åŸºäºå¼€æºæ¨¡å‹é¢†åŸŸå¾®è°ƒåçš„æ¨¡å‹ä¸ºåŸºåº§ã€ä»¥å¯¹æ¯”å­¦ä¹ ä¸ºç›®æ ‡è®¾è®¡åŒå¡”ç»“æ„ã€å¤šåœºæ™¯å¤šæ ·Promptè®¾è®¡æ ·æœ¬ç»“æ„ï¼Œä»¥SFTæ–¹å¼è¿›è¡Œå¤šåœºæ™¯ä»»åŠ¡è®­ç»ƒå®ç°æœç´¢æ¨èå¤šåœºæ™¯è¯­ä¹‰æ¨¡å‹ï¼›å¦‚ä¸Šæ‰€è¿°ï¼Œå¤§å›¾é¢„è®­ç»ƒé˜¶æ®µé€šè¿‡è‡ªå®šä¹‰åœºMeta\-pathæ˜¾ç¤ºå®šä¹‰åœºæ™¯å­å›¾ï¼Œå¤šåœºæ™¯å­å›¾å†…è¿›è¡Œé«˜é˜¶èšåˆã€å¤šåœºæ™¯å­å›¾é—´åº•å±‚å…±äº«èŠ‚ç‚¹è¡¨å¾ï¼Œæ¨¡å‹ä»¥æ— ç›‘ç£é“¾æ¥é¢„æµ‹ä»»åŠ¡ä½œä¸ºç›®æ ‡ï¼Œæœ€åGARå’ŒGNNè”åˆè®­ç»ƒå®ç°ç»Ÿä¸€å¤§å›¾é¢„è®­ç»ƒä»»åŠ¡ã€‚ä¸‹æ¸¸è®¾è®¡å¤šåœºæ™¯Soft\-promptè¿›è¡ŒSFTï¼Œå…·ä½“Soft\-prompt åˆå§‹åŒ–å‘é‡è¿›è¡Œè¡¨ç¤ºï¼Œé€šè¿‡èåˆé¢„è®­ç»ƒèŠ‚ç‚¹è¡¨å¾Soft\-promptè¡¨å¾ä½œä¸ºæœ€ç»ˆèŠ‚ç‚¹è¡¨å¾ï¼Œå¤šåœºæ™¯ä»¥è®­ç»ƒå°‘é‡å‚æ•°ã€å°æ ·æœ¬è¿›è¡Œä¸‹æ¸¸ä»»åŠ¡å¾®è°ƒã€‚



**ç»“æœ**ï¼šç›¸æ¯”äºå¤šä»»åŠ¡BERTï¼ŒGARå¸¦æ¥æ‰€æœ‰ä»»åŠ¡ç¦»çº¿æŒ‡æ ‡ä¸Šæ¶¨ï¼Œå¤šä»»åŠ¡å¹³å‡Recall \+1%ï¼›zero\-shotè¯„ä¼°ä¸‹æ¸¸ä»»åŠ¡ï¼Œsoft prompt å¾®è°ƒï¼ˆå¯¹æ¯”ä¸è¿›è¡Œä¸‹æ¸¸ä»»åŠ¡å¾®è°ƒï¼‰ï¼Œä¸‹æ¸¸å¤šä»»åŠ¡å¹³å‡Recall \+10%ã€‚



### 2.2 å¼‚æ„å¤§å›¾åœ¨çº¿å»ºæ¨¡


ç”±äºç”¨æˆ·éœ€æ±‚å˜åŒ–å…³ç³»æœ‰å³æ—¶æ€§ã€åœºæ™¯é—´ç›¸äº’æ¯”è¾ƒé€æ¸æ”¶æ•›çš„ç‰¹ç‚¹ï¼Œå› æ­¤æˆ‘ä»¬åŸºäºå¤šåœºæ™¯å¼‚æ„å¤§å›¾å»ºè®¾å›¾åœ¨çº¿å¼•æ“ï¼Œé€šè¿‡å›¾åœ¨çº¿å»ºæ¨¡å®Œæˆç”¨æˆ·ä¸ä¾›ç»™çš„é«˜æ•ˆåŒ¹é…ï¼Œæé«˜æµé‡ä½¿ç”¨å’Œç”¨æˆ·æœç´¢æ•ˆç‡ï¼Œä¸šåŠ¡æ”¶ç›Šå–å¾—äº†è¾ƒä¸ºæ˜æ˜¾çš„æ•ˆæœã€‚



**ç”¨æˆ·éœ€æ±‚å˜åŒ–çš„åŠ¨æ€å›¾å»ºæ¨¡**



**èƒŒæ™¯**ï¼šè€ƒè™‘ç”¨æˆ·éœ€Sessionä¹‹é—´å…´è¶£ç‹¬ç«‹ã€Sessionå†…éƒ¨ç”¨æˆ·åœ¨ä¸åŒåœºæ™¯é—´ç›¸äº’æ¯”è¾ƒï¼Œéœ€æ±‚æ¼”åŒ–è‡³é€æ¸æ”¶æ•›çš„ç‰¹ç‚¹ï¼Œæå‡ºåŸºäºåŠ¨æ€å›¾çš„ç”¨æˆ·Sessionlevelå»ºæ¨¡åˆ»åŒ–ç”¨æˆ·éœ€æ±‚çš„å˜åŒ–å…³ç³»ã€‚



**åŠ¨ä½œ**ï¼šSessionlevelå»ºæ¨¡åŠ å‰§äº†åºåˆ—çš„ç¨€ç–æ€§ã€åŠ å¤§äº†è¡¨å¾éš¾çš„é—®é¢˜ï¼Œæˆ‘ä»¬åˆ©ç”¨å›¾çš„é«˜é˜¶èšåˆèƒ½åŠ›ï¼Œæ²¿ç”¨ä¹‹å‰â€œè½¯ç¡¬é™å™ªâ€èšåˆå‡½æ•°ï¼Œé€šè¿‡é«˜é˜¶èšåˆæ“ä½œä¸°å¯Œåºåˆ—ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„è¡¨å¾èƒ½åŠ›ã€‚Sessionlevelåˆ†ä¸ºSessionå†…éƒ¨å»ºæ¨¡å’ŒSessioné—´å»ºæ¨¡ï¼ŒSessionå†…éƒ¨åœºæ™¯æ‹†åˆ†ä¸ºæ¨èã€æœç´¢ä¸­ã€æœç´¢åï¼Œé€šè¿‡åŸºäºåœºæ™¯çš„æ—¶åºSelf\-attentionå»ºæ¨¡éœ€æ±‚æ¼”åŒ–å…³ç³»ï¼ŒSessioné—´åŸºäºå½“å‰å®æ—¶æœç´¢æ„å›¾ã€ç”¨æˆ·ä¿¡æ¯åŒé‡æ³¨æ„åŠ›åŠ¨æ€èšåˆï¼Œæ•´ä½“å»ºæ¨¡ç”¨æˆ·éœ€æ±‚ã€‚ç”¨æˆ·æœç´¢åœºæ™¯ä¸‹æœç´¢è¯è¡¨è¾¾ç”¨æˆ·å³æ—¶æ„å›¾ï¼Œå› æ­¤æˆ‘ä»¬åœ¨ä¸Šè¿°è¯­è¨€å¢å¼ºé™å™ªé¢„è®­ç»ƒå›¾çš„åŸºç¡€ä¸Šï¼ŒåŸºäºæœç´¢è¯å’Œå€™é€‰å•†å“å…³ç³»ã€å•†å“å…±ç°å…³ç³»æ„å»ºæœç´¢å•†å“å­å›¾ï¼Œä¸ºç”¨æˆ·å¬å›ç²¾ç¡®å€™é€‰ï¼›æœ€ç»ˆæœç´¢å­å›¾è¡¨å¾å’ŒåŠ¨æ€å›¾è¡¨å¾è¿›è¡Œèåˆï¼Œæ•´ä½“ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š



![](https://p1.meituan.net/travelcube/3f788203ef3e32122c3c3c733878fee9380179.png)



**ç»“æœ**ï¼šç”¨æˆ·Sessionlevelå»ºæ¨¡ç¦»çº¿Recall \+ 1%ã€‚



## 3 å¤§è§„æ¨¡å›¾å¼•æ“GraphETå·¥ç¨‹å»ºè®¾


### 3.1 å¤§è§„æ¨¡å›¾å¼•æ“è®­ç»ƒæ¡†æ¶å»ºè®¾


å›¾å­¦ä¹ ä¸šåŠ¡åœºæ™¯çš„å›¾æ¨¡å‹è§„æ¨¡è¶Šæ¥è¶Šå¤§ï¼Œä¸šåŠ¡å·²ç»è¿­ä»£åˆ°äº†å‡ äº¿èŠ‚ç‚¹ç™¾äº¿è¾¹çš„è§„æ¨¡ï¼Œä»¥10äº¿èŠ‚ç‚¹ã€100äº¿æ¡è¾¹çš„å›¾æ¨¡å‹ä¸ºä¾‹ï¼Œå›¾ç»“æ„æœ¬èº«é‡‡ç”¨COOæ ¼å¼ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè¦å çº¦100GBçš„å†…å­˜ï¼ˆ10GB\*4\*2 \+ 1GB\*8ï¼‰ã€‚åœ¨é‡‡æ ·è¿‡ç¨‹ä¸­éšæœºæ¸¸èµ°ä¼šç”¨CSRã€CSCä¸¤ç§æ ¼å¼ä¿å­˜ä¸­é—´ç»“æœï¼Œä»¥åŠè®­ç»ƒè¿‡ç¨‹ä¸­çš„å†…å­˜å ç”¨ï¼Œå†…å­˜å ç”¨å·²ç»æœ‰äº†300GBã€‚



æ¯ä¸ªèŠ‚ç‚¹ä¸­è¿˜æœ‰ç”¨æˆ·å®šä¹‰çš„ç‰¹å¾ï¼Œä»¥ä¸€ä¸ª256ç»´çš„èŠ‚ç‚¹ç‰¹å¾ä¸ºä¾‹ï¼Œ10äº¿ä¸ªèŠ‚ç‚¹æ€»å…±éœ€è¦256\* 4\*1GB = 1TBã€‚èŠ‚ç‚¹é€šå¸¸ä¸ä¼šåªæœ‰ä¸€ç±»ç‰¹å¾ï¼Œè¾¹ä¸Šä¹Ÿä¼šæœ‰å„ç§ç»´åº¦çš„è¾¹ç‰¹å¾ï¼Œè¿™æ ·çš„å›¾è§„æ¨¡å¸¸è§é›†ç¾¤ä¸­çš„1TBå†…å­˜çš„æ— æ³•ä¿å­˜ã€‚ä¸ºäº†ä¿è¯ä¸šåŠ¡æ•ˆæœï¼ŒèŠ‚ç‚¹å’Œè¾¹çš„Sparseã€Denseç‰¹å¾éœ€è¦å’Œæ¨¡å‹å‚æ•°è¿›è¡Œç«¯åˆ°ç«¯å…¨é‡æ›´æ–°ï¼ŒTBçº§åˆ«å‚æ•°GPUè®­ç»ƒæ›´æ–°å¼€æºå›¾å­¦ä¹ æ¡†æ¶ä¸æ”¯æŒã€‚



å› æ­¤æˆ‘ä»¬åœ¨å¼€æºçš„å›¾å­¦ä¹ è®­ç»ƒæ¡†æ¶DGLï¼ˆDeep Graph Libraryï¼‰v0.7åŸºç¡€ä¸Šï¼Œç ”å‘äº†ä¸€å¥—å¤§è§„æ¨¡å›¾ç¥ç»ç½‘ç»œçš„è®­ç»ƒæ¡†æ¶GraphETï¼ŒæœåŠ¡äºå…¬å¸å¤šä¸ªä¸šåŠ¡çº¿ã€‚è¯¥æ¡†æ¶æ”¯æŒäº¿çº§åˆ«èŠ‚ç‚¹ã€ç™¾äº¿çº§åˆ«è¾¹ç¦»çº¿å›¾è®­ç»ƒæµç¨‹é«˜æ•ˆpiplineï¼ˆå›¾æ„å»º/é‡‡æ ·/èšåˆ/ç«¯åˆ°ç«¯å»ºæ¨¡ï¼‰Pytorch Dgl Serving åœ¨çº¿å‘é‡è®¡ç®—ï¼Œæ–¹ä¾¿å®ç°å­¦æœ¯ç•Œä»»æ„å¤æ‚å›¾æ¨¡å‹å·¥ç¨‹åœ¨çº¿åŒ–ã€‚



GraphETè®­ç»ƒç³»ç»Ÿçš„æ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š



![](https://p0.meituan.net/travelcube/4001a08288597881ea21f82a73696ac4303129.png)



ç³»ç»Ÿç”±è´Ÿè´£æ¨¡å‹è®­ç»ƒçš„Workerè¿›ç¨‹å’Œè´Ÿè´£Hashtableä¿å­˜çš„Parameter Serverè¿›ç¨‹ä¸¤éƒ¨åˆ†æ„æˆã€‚ä¸ºäº†é™ä½å†…å­˜å¼€é”€ï¼Œå°†DGLå›¾ç»“æ„å­˜åˆ°å…±äº«å†…å­˜ä¸­ï¼Œåœ¨å¤šä¸ªWorkerè¿›ç¨‹é—´å…±äº«åŒä¸€ä»½å›¾ç»“æ„ã€‚å›¾ä¸­çš„èŠ‚ç‚¹å’Œè¾¹ä¸Šçš„ç‰¹å¾ä¿å­˜åœ¨Parameter Serverä¸­ï¼Œæ¯æ¬¡é‡‡æ ·åä¼šå‘Parameter Serverå‘é€éœ€è¦æŸ¥è¯¢çš„èŠ‚ç‚¹ï¼Œå°†æŸ¥è¯¢åˆ°çš„Embeddingæ”¾å…¥SHMã€‚Mini\-batchè®­ç»ƒå‰å°†EmbeddingåŠ è½½åˆ°GPUä¸Šï¼Œè®­ç»ƒè¿‡ç¨‹ä¸­ç”¨alltoallé€šä¿¡æ¥è·å–èŠ‚ç‚¹/è¾¹ç‰¹å¾ï¼Œè®­ç»ƒç»“æŸåå°†Embeddingå†™å›PSå®Œæˆæ›´æ–°ã€‚ç³»ç»Ÿæ”¯æŒæ˜¾å­˜/å†…å­˜/SSDå¤šçº§å­˜å‚¨ï¼Œæ ¹æ®ç‰¹å¾çš„è®¿é—®é¢‘æ¬¡æ¥å°†ç‰¹å¾æ”¾ç½®åœ¨åˆé€‚çš„ä½ç½®ï¼Œåœ¨ä¸å½±å“ç³»ç»Ÿååçš„æƒ…å†µä¸‹ï¼Œæé«˜äº†DGLå¯ä»¥æ”¯æ’‘çš„å›¾çš„ç‰¹å¾è§„æ¨¡ã€‚



**workerè¿›ç¨‹**



åœ¨æˆ‘ä»¬è®¾è®¡çš„æ¶æ„ä¸‹ï¼Œæ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­æ¶‰åŠSuper\-batchç²’åº¦çš„è®­ç»ƒæ ·æœ¬é‡‡æ ·ã€æ ·æœ¬ç‰¹å¾æŸ¥è¯¢ã€Mini\-batchç²’åº¦çš„GPUè®­ç»ƒå’Œç‰¹å¾æ›´æ–°ï¼Œä¸åŒé˜¶æ®µå¯¹ç¡¬ä»¶ç‰¹ç‚¹çš„éœ€æ±‚æ˜¯ä¸åŒçš„ï¼Œå…·ä½“æ¥è¯´å¯¹ä¸ºäº†å……åˆ†å‘æŒ¥ä¸åŒç¡¬ä»¶çš„åŠŸèƒ½ï¼Œæœ€å¤§åŒ–åˆ©ç”¨GPUçš„è®¡ç®—ä¼˜åŠ¿ï¼Œæå‡æ¨¡å‹æ•´ä½“è®­ç»ƒé€Ÿåº¦ï¼Œæˆ‘ä»¬é€šè¿‡ä¸‰çº§æµæ°´çº¿æ¥åŠ é€Ÿæ¨¡å‹è®­ç»ƒã€‚



* è®­ç»ƒæ ·æœ¬é‡‡æ ·æ˜¯CPUå¯†é›†å‹ä»»åŠ¡ï¼›
* æ ·æœ¬ç‰¹å¾æŸ¥è¯¢æ˜¯SSD IOå¯†é›†å‹ä»»åŠ¡ï¼›
* GPUè®­ç»ƒæ˜¯è®¡ç®—å¯†é›†å‹ä»»åŠ¡ã€‚


![](https://p1.meituan.net/travelcube/c41f77f27971b6d393e041f390b967bd210736.png)



åœ¨æµæ°´çº¿ä¸­ï¼Œæ¯ä¸ªSuper\-Batchéƒ½åŒ…æ‹¬é‡‡æ ·ã€è·å–ç‰¹å¾ã€è®­ç»ƒä¸‰ä¸ªé˜¶æ®µã€‚æ ·æœ¬é‡‡æ ·é˜¶æ®µæ˜¯ç‹¬ç«‹çš„ï¼Œé‡‡æ ·ç»“æœæ”¾å…¥Queueä¸­ï¼›è·å–ç‰¹å¾é˜¶æ®µç”±PS Clientå‘PSå‘é€å¼‚æ­¥è¯·æ±‚æ‹‰å–ç‰¹å¾å‚æ•°æ”¾å…¥SHMï¼›è®­ç»ƒé˜¶æ®µé˜¶æ®µå°†ç‰¹å¾æ”¾åˆ°GPUä¸Šï¼Œè®­ç»ƒåå°†æ–°çš„Embeddingå†™å›SHMã€‚å¤šçº§æµæ°´çº¿ä¹‹é—´é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—å’Œå…±äº«å†…å­˜é€šä¿¡ã€‚



workerè¿›ç¨‹å¯¹é‡å¤æŸ¥è¯¢Embeddingåšäº†ä¸¤æ–¹é¢ä¼˜åŒ–ï¼š



* é‡‡æ ·åï¼Œåœ¨æŸ¥è¯¢ç‰¹å¾å‰ä¼šå¯¹å¤šGPUé‡‡æ ·å‡ºçš„Keyè¿›è¡Œå»é‡ã€‚ç”±äºWorkerè¿›ç¨‹ä¸€ä¸ªSuper\-batché‡‡æ ·å¤šä¸ªMini\-batchï¼Œé‚»å±…è¾ƒå¤šçš„èŠ‚ç‚¹å¯èƒ½ä¼šè¢«é‡å¤é‡‡æ ·ï¼Œå»é‡åæ¯ä¸ªkeyåœ¨PSç«¯ä»…æŸ¥è¯¢ä¸€æ¬¡ï¼›
* æ¯ä¸ªMini\-batchè®­ç»ƒæ—¶ï¼Œæ‰€æœ‰KeyæŒ‰ç…§Key%Worker\_num=içš„æ–¹å¼å­˜å‚¨åœ¨Worker iå¯¹åº”çš„æ˜¾å­˜ä¸­ï¼ŒGPUè¿›ç¨‹é—´alltoallé€šä¿¡å‰ä¼šå¯¹keyå»é‡ä»¥å‡å°‘å¡é—´é€šä¿¡ã€‚


**PSè¿›ç¨‹**



PSä¸»è¦è´Ÿè´£PSè´Ÿè´£å­˜å‚¨ã€æŸ¥æ‰¾å’Œæ›´æ–°Embeddingå‚æ•°ï¼Œæ”¯æŒä¸¤ç§å­˜å‚¨æ–¹å¼ï¼šFull\_memoryå’ŒSsd\_kv\_storeã€‚åœ¨Full\_memoryæ¨¡å¼ä¸­æ‰€æœ‰çš„å‚æ•°éƒ½æ˜¯å­˜åœ¨å†…å­˜ä¸­ï¼Œè¿™ç›¸å½“äºå°†å‚æ•°å­˜å‚¨åœ¨SHMä¸­ã€‚åœ¨Ssd\_kv\_storeæ¨¡å¼ä¸­ï¼Œæ‰€æœ‰çš„å‚æ•°éƒ½å­˜åœ¨SSDä¸­ï¼Œå†…å­˜ä½œä¸ºSSDçš„Cacheä»…å­˜å‚¨éƒ¨åˆ†å‚æ•°ï¼Œè¿™ç§æ–¹å¼å¯ä»¥å­˜å‚¨æ›´å¤šçš„å‚æ•°ï¼Œä½†éœ€è¦è€ƒè™‘Cacheå‘½ä¸­ç‡ï¼Œé¿å…å†…å­˜ä¸­å­˜å‚¨çš„å‚æ•°å¤ªå°‘ï¼Œå¯¼è‡´SSDè¯»å†™é€Ÿåº¦æˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚



PSä»¥KVå½¢å¼å­˜å‚¨Embeddingå‚æ•°ï¼Œä½¿å¾—Embeddingå‚æ•°åœ¨PSå’ŒWorkerè¿›ç¨‹ä¸­çš„PS Clientä¹‹é—´å…±äº«ã€‚ä¸ºäº†ä¼˜åŒ–å†…å­˜ä½¿ç”¨æ•ˆç‡ï¼Œå°†æ‰€æœ‰Hashtableçš„KVå¯¹ç»Ÿä¸€å­˜å‚¨åœ¨ä¸€å—å¤§çš„å…±äº«å†…å­˜ä¸­ï¼Œå†…å­˜ä¸­çš„Hashtableä¸­å­˜å‚¨æŒ‡å‘å…±äº«å†…å­˜ä¸­å¯¹åº”Valueçš„æŒ‡é’ˆï¼ˆOffsetï¼‰ã€‚



æˆ‘ä»¬åœ¨SSDå¼•æ“æ–¹é¢åšäº†å¤šæ–¹é¢çš„ä¼˜åŒ–ï¼š



* **SSDèšåˆè¯»ä¼˜åŒ–**ã€‚SSDä¸Šçš„KeyæŸ¥è¯¢æ˜¯ä»¥Groupä¸ºå•ä½è¿›è¡Œæ•°æ®è¯»å–ï¼Œè€ŒæŸ¥è¯¢Keyçš„åˆ†å¸ƒå¾ˆéšæœºï¼Œå¯¼è‡´è¯»åˆ°PageCacheçš„Groupæ•°æ®è¢«é¢‘ç¹æ¢å…¥æ¢å‡ºï¼Œå½±å“æŸ¥è¯¢æ€§èƒ½ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†å¾…æŸ¥è¯¢çš„Keyé›†åˆæŒ‰ç…§Groupè¿›è¡Œæå‰èšåˆï¼Œèšåˆåå†è¿›è¡ŒSSDæŸ¥è¯¢ï¼Œä¸€æ–¹é¢é™ä½I/Oè¯»å–æ¬¡æ•°ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿèƒ½æ›´å¥½åˆ©ç”¨PageCacheæ¥æå‡æŸ¥è¯¢æ€§èƒ½ã€‚
* **å¯¹è±¡æ± ä¼˜åŒ–**ã€‚åœ¨KeyæŸ¥è¯¢è¿‡ç¨‹ä¸­ï¼Œéœ€è¦é¢‘ç¹åˆ›å»ºå°å¯¹è±¡ï¼ˆCacheç»“ç‚¹ã€Blockç»“ç‚¹ç­‰ï¼‰ï¼Œè™½ç„¶åº•å±‚å·²ä½¿ç”¨TCMallocä¼˜åŒ–ï¼Œä½†å†…å­˜åˆ†é…é‡Šæ”¾çš„å¼€é”€ä»ä¸å®¹å°è§†ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¼•å…¥å®šé•¿å¯¹è±¡æ± ï¼Œåœ¨è¿ç»­å¤§å†…å­˜ä¸Šç»´æŠ¤å°å¯¹è±¡çš„åˆ†é…å’Œé‡Šæ”¾æ“ä½œï¼Œå‡å°‘ç³»ç»Ÿè°ƒç”¨ï¼Œæå‡æœåŠ¡æ€§èƒ½ã€‚
* **æ–‡ä»¶GCä¼˜åŒ–**ã€‚ç”±äºCompactionæ“ä½œï¼ŒSSDæ–‡ä»¶å¯èƒ½åŒ…å«å¾ˆå¤šæ— æ•ˆGroupæ•°æ®ï¼Œä½†åªæœ‰æ–‡ä»¶ä¸­Groupå…¨éƒ¨ä¸ºæ— æ•ˆçŠ¶æ€æ—¶æ‰ä¼šè§¦å‘æ–‡ä»¶åˆ é™¤ï¼Œå¯¼è‡´æœ‰æ•ˆGroupå æ¯”å¾ˆä½çš„æ–‡ä»¶è¿Ÿè¿Ÿå¾—ä¸åˆ°åˆ é™¤ï¼Œå ç”¨ç£ç›˜ç©ºé—´ï¼Œå¯¹SSDè¯»å†™æ€§èƒ½ä¹Ÿäº§ç”Ÿå½±å“ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¼•å…¥å¼‚æ­¥GCçº¿ç¨‹ï¼Œå®šæœŸåˆå¹¶æœ‰æ•ˆGroupå æ¯”ä½çš„æ–‡ä»¶ï¼Œåˆ é™¤æ— æ•ˆæ–‡ä»¶ï¼Œé™ä½ç£ç›˜å ç”¨ã€‚


### 3.2 å›¾å¼•æ“åœ¨çº¿æ¡†æ¶å»ºè®¾


éšç€å›¾è®­ç»ƒå¼•æ“æ”¯æŒå¤§è§„æ¨¡å›¾è½åœ°ï¼Œå›¾èŠ‚ç‚¹å’Œè¾¹å˜åŒ–å…³ç³»æ›´æ–°ã€å®æ—¶æ–°å¢å›¾èŠ‚ç‚¹ã€å®æ—¶é¢„æµ‹å›¾è¡¨å¾èƒ½åŠ›æˆä¸ºåˆ¶çº¦ä¸šåŠ¡æ•ˆæœçš„ç“¶é¢ˆã€‚å› æ­¤åŸºäºå›¾æ¨¡å‹ç¦»çº¿è®­ç»ƒæµç¨‹ï¼Œå»ºè®¾å›¾åœ¨çº¿å¼•æ“ã€‚å›¾åœ¨çº¿å¼•æ“å»ºè®¾åŒ…æ‹¬ä¸¤éƒ¨åˆ†å†…å®¹ï¼šå›¾é‡‡æ ·å’Œå›¾æ¨ç†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š



![](https://p1.meituan.net/travelcube/47d3d59b3c308d81dedc7de8c3a7c07880017.png)



* **å›¾é‡‡æ ·**ï¼šå°†å›¾æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­ç”¨åˆ°çš„å¤šè·³å›¾èŠ‚ç‚¹ï¼Œè¿›è¡Œæ•´åˆæ‹¼è£…åå†™å…¥KV Servingï¼Œæä¾›é«˜æ•ˆå›¾é‡‡æ ·ï¼ˆåç»­ä¼šè¿ç§»è‡³å›¾æ•°æ®åº“ï¼Œå®ç°å®æ—¶é‡‡æ ·ï¼‰ï¼›
* **å›¾æ¨ç†**ï¼šå°†å›¾é‡‡æ ·èŠ‚ç‚¹ä»¥åŠå…¶å®ƒç‰¹å¾è¾“å…¥åˆ°å›¾æ¨¡å‹ä¸­ï¼Œè¿›è¡Œåœ¨çº¿å‰å‘æ¨ç†ï¼Œè¾“å‡ºå‘é‡Embeddingç”¨äºåç»­çš„å‘é‡æ£€ç´¢å¬å›ã€‚ä¸‹é¢ä¹Ÿå°†é‡ç‚¹ä»‹ç»æˆ‘ä»¬åœ¨å›¾æ¨ç†æ–¹é¢çš„ç›¸å…³å»ºè®¾å·¥ä½œã€‚


**å›¾æ¨ç†é‡åˆ°çš„æŒ‘æˆ˜**



**Pythonåœ¨çº¿æ¨ç†**ï¼šå›¾æ¨¡å‹åŸºäºå¼€æºDGLæ¡†æ¶è¿›è¡Œè®­ç»ƒå’Œå¯¼å‡ºã€‚è™½ç„¶DGLæ¡†æ¶æ”¯æŒPytorchå’ŒTensorflowä¸¤ç§backendï¼Œä½†Pytorchç›¸æ¯”Tensorflowï¼Œæ— è®ºæ˜¯æ–°åŠŸèƒ½ç‰¹æ€§çš„è¿­ä»£æ•ˆç‡æ–¹é¢ï¼Œè¿˜æ˜¯å…¬å¸è®­ç»ƒå¹³å°çš„æ”¯æŒæ–¹é¢éƒ½æ›´åŠ çªå‡ºï¼Œå› æ­¤åœ¨çº¿æ¨ç†éƒ¨ç½²çš„å›¾æ¨¡å‹æ˜¯åŸºäºDGL\+Pytorchçš„æ¨¡å¼è¿›è¡Œè®­ç»ƒå’Œå¯¼å‡ºã€‚



Pytorchæœ¬èº«æ˜¯æ”¯æŒå°†æ¨¡å‹åºåˆ—åŒ–æˆTorchScriptæ ¼å¼ï¼Œè¿›è¡ŒC\+\+éƒ¨ç½²å’Œæ¨ç†åŠ é€Ÿï¼Œä½†DGLæ¡†æ¶æ˜¯åŸºäºPytorchè¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œæ— æ³•åºåˆ—åŒ–æˆTorchScriptæ ¼å¼è¿›è¡ŒC\+\+éƒ¨ç½²ï¼Œåªèƒ½é€šè¿‡Pythonéƒ¨ç½²çš„æ–¹å¼è¿›è¡Œæ¨ç†ï¼Œè¿™å°±éœ€è¦åœ¨ç°æœ‰C\+\+æ¨ç†æ¡†æ¶çš„åŸºç¡€ä¸Šè¿›è¡Œåº•å±‚èƒ½åŠ›å‡çº§ï¼Œæ”¯æŒPythonéƒ¨ç½²æ¨¡å¼çš„backendï¼Œè¿™å¯¹æ¡†æ¶çš„WorkFlowæ¨ç†æµç¨‹ã€æ¨¡å‹ç®¡ç†æ¨¡å¼ã€è¿›ç¨‹éƒ¨ç½²æ–¹å¼ç­‰æ–¹é¢éƒ½æ˜¯ä¸å°çš„æŒ‘æˆ˜ã€‚



**å•æœºæ˜¾å­˜ç“¶é¢ˆ**ï¼šPythonç”±äºå…¨å±€è§£é‡Šå™¨é”GILçš„é™åˆ¶ï¼Œå¯¼è‡´å•è¿›ç¨‹æ¨¡å¼æ— æ³•å¹¶è¡Œå¤„ç†è¯·æ±‚ï¼Œä¸€æ–¹é¢å¯¼è‡´å¤šæ ¸CPU/GPUæ— æ³•è¢«å……åˆ†åˆ©ç”¨ï¼Œèµ„æºè¢«æµªè´¹ï¼Œå¦ä¸€æ–¹é¢è¯·æ±‚è¢«ä¸²è¡Œç§¯å‹ï¼Œå¯¼è‡´è€—æ—¶ä¸Šæ¶¨ï¼Œè¿™å¯¹äºåœ¨çº¿æ¨ç†æœåŠ¡æ˜¯ä¸èƒ½æ¥å—çš„ã€‚



å› æ­¤ï¼Œä¸ºäº†é¿å…GILé”çš„å½±å“ï¼Œéœ€è¦é€šè¿‡éƒ¨ç½²å¤šè¿›ç¨‹çš„æ–¹å¼è¿›è¡Œæ¨¡å‹æ¨ç†ï¼Œæ”¯æŒåœ¨çº¿è¯·æ±‚çš„å¹¶å‘å¤„ç†ã€‚ä½†å¤šè¿›ç¨‹éƒ¨ç½²æ–¹å¼ï¼Œéœ€è¦æ¯ä¸ªè¿›ç¨‹éƒ½åŠ è½½ä¸€ä»½æ¨¡å‹æ•°æ®ï¼Œè¿™æ— ç–‘ä¼šå—åˆ°å•æœºæ˜¾å­˜çš„çº¦æŸï¼Œæ¨¡å‹è¶Šå¤§ï¼Œå•æœºå¯éƒ¨ç½²çš„è¿›ç¨‹æ•°å°±è¶Šå°‘ï¼Œè¿›è€Œé™åˆ¶å¤„ç†è¯·æ±‚çš„å¹¶å‘åº¦ï¼Œå½±å“åœ¨çº¿æ¨ç†æ€§èƒ½ã€‚å› æ­¤ï¼Œå¦‚ä½•é™ä½å•è¿›ç¨‹å¯åŠ è½½çš„æ¨¡å‹æ•°æ®é‡ï¼Œæé«˜å¹¶è¡Œéƒ¨ç½²çš„è¿›ç¨‹æ•°é‡ï¼Œæ˜¯æˆ‘ä»¬éœ€è¦æ€è€ƒçš„é—®é¢˜å’ŒæŒ‘æˆ˜ã€‚



**å›¾æ¨ç†æ¡†æ¶å»ºè®¾**



é’ˆå¯¹ä¸Šé¢æ¢³ç†çš„é—®é¢˜å’ŒæŒ‘æˆ˜ï¼Œå¹¶ç»“åˆä¸šåŠ¡ç°çŠ¶å’Œç³»ç»Ÿç°çŠ¶ï¼Œæˆ‘ä»¬è¿›è¡Œäº†åœ¨çº¿å›¾æ¨ç†æ¡†æ¶çš„å»ºè®¾ï¼Œç³»ç»Ÿæ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š



![](https://p1.meituan.net/travelcube/a3bb4460690c6f7dfda37016df253527221332.png)



ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œåœ¨çº¿å›¾æ¨ç†æ¡†æ¶ç”±1ä¸ªä¸»è¿›ç¨‹\+ Nä¸ªå­è¿›ç¨‹ç»„æˆï¼Œä¸»è¿›ç¨‹è´Ÿè´£WorkFlowå·¥ä½œæµçš„è°ƒåº¦ï¼ŒåŒ…æ‹¬åœ¨çº¿è¯·æ±‚æ¥æ”¶ã€è§£æã€ç‰¹å¾/å›¾èŠ‚ç‚¹Embeddingæ•°æ®å‡†å¤‡ä»¥åŠä¸å­è¿›ç¨‹é—´çš„æ•°æ®äº¤äº’ï¼Œæœ€ç»ˆè¿”å›å‘é‡Embeddingç»“æœï¼›å­è¿›ç¨‹è´Ÿè´£ä»¥Pythonçš„æ–¹å¼è¿›è¡Œæ¨¡å‹çš„åŠ è½½å’Œæ¨ç†ï¼Œå¹¶å°†æ¨ç†ç»“æœè¿”å›ç»™ä¸»è¿›ç¨‹ã€‚ä¸»è¿›ç¨‹æ¯æ¬¡ä¼šä»å­è¿›ç¨‹æ± ä¸­é€‰å–ç©ºé—²å­è¿›ç¨‹ï¼Œå¹¶é€šè¿‡ç®¡é“è¿›è¡Œé€šä¿¡ã€‚



**å¤šè¿›ç¨‹æ¶æ„ï¼šè§£å†³Python GILé”é€ æˆçš„å•è¿›ç¨‹CPU/GPUåˆ©ç”¨ç‡ä½çš„é—®é¢˜**



å°†Pythonæ‰§è¡Œé€»è¾‘éƒ¨ç½²åœ¨å¤šä¸ªè¿›ç¨‹ä¸­ï¼Œé€šè¿‡å•è¿›ç¨‹å†…ä¸²è¡Œæ‰§è¡Œè¯·æ±‚ï¼Œå¯æœ‰æ•ˆé¿å…Python GILé”å¸¦æ¥çš„é™åˆ¶ï¼Œé€šè¿‡è¿›ç¨‹é—´å¹¶è¡Œå¤„ç†è¯·æ±‚ï¼Œå¯å……åˆ†åˆ©ç”¨CPU/GPUå¤šæ ¸èµ„æºï¼Œæå‡æœåŠ¡æ€§èƒ½å’Œååã€‚ä¸»è¿›ç¨‹å’Œå­è¿›ç¨‹æ± ä¹‹é—´ï¼Œäº¤äº’æµç¨‹ç±»ä¼¼äºâ€œç”Ÿäº§è€…\-æ¶ˆè´¹è€…â€æ¨¡å¼ï¼Œé€šè¿‡å¼•å…¥ç®¡é“ã€epollç­‰æœºåˆ¶ï¼Œä¿è¯è¿›ç¨‹é—´é€šä¿¡é«˜æ•ˆæ‰§è¡Œã€‚



**æ¨¡å‹æ‹†åˆ†ï¼šè§£å†³æ¨¡å‹è¿‡å¤§é€ æˆçš„å•æœºæ˜¾å­˜å¯¹å­è¿›ç¨‹æ•°é‡é™åˆ¶çš„é—®é¢˜**



å›¾æ¨¡å‹åŒ…æ‹¬äº¿çº§èŠ‚ç‚¹å’Œå‡ åäº¿æ¡è¾¹ï¼Œæ¨¡å‹å¤§å°åœ¨å‡ åGå·¦å³ï¼Œé»˜è®¤å…¨éƒ¨åŠ è½½åˆ°GPUä¸­ã€‚è€ƒè™‘åˆ°æ¨¡å‹åŠ è½½åä¼šå‡ºç°è†¨èƒ€ç°è±¡ï¼Œå®é™…å ç”¨çš„GPUæ˜¾å­˜ä¼šæ›´å¤§ï¼Œè€ŒGPUæ˜¾å­˜èµ„æºæœ‰é™ï¼ŒåŠ è½½å•ä¸ªæ¨¡å‹éƒ½ä¼šå­˜åœ¨æ˜¾å­˜æº¢å‡ºé£é™©ï¼Œå¾ˆéš¾æ”¯æ’‘å¤šè¿›ç¨‹åŠ è½½å¤šæ¨¡å‹çš„æ¨¡å¼ã€‚



ç»è¿‡åˆ†æï¼Œæˆ‘ä»¬å‘ç°æ¨¡å‹ç»“æ„ä¸­å­˜å‚¨äº†å¤§é‡å›¾èŠ‚ç‚¹Embeddingæ•°æ®ï¼Œè€Œå›¾æ¨¡å‹ç½‘ç»œDenseå‚æ•°åªå ç™¾å…†å·¦å³ï¼ŒåŒæ—¶å‘ç°å•æœºå†…å­˜å¤§å°è¦è¿œå¤§äºGPUæ˜¾å­˜ï¼Œä¸”å¤„äºç©ºé—²çŠ¶æ€ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨ç¦»çº¿ä¾§å°†å›¾æ¨¡å‹è¿›è¡Œäº†æ‹†åˆ†ï¼Œå°†å›¾èŠ‚ç‚¹Embeddingéƒ¨åˆ†åŠ è½½åˆ°ä¸»è¿›ç¨‹å†…å­˜ä¸­ï¼Œä¸”åªéœ€åŠ è½½ä¸€æ¬¡ï¼Œè€Œå°†æ¨¡å‹Denseå‚æ•°åŠ è½½åˆ°GPUæ˜¾å­˜ä¸­ï¼Œè™½ç„¶æ¯ä¸ªå­è¿›ç¨‹éƒ½éœ€åŠ è½½ä¸€ä»½ï¼Œä½†Denseå‚æ•°ä½“é‡è¾ƒå°ï¼Œå•ä¸ªè¿›ç¨‹å ç”¨æ˜¾å­˜å¯æ§ï¼Œå¯å¤§å¹…æå‡å­è¿›ç¨‹éƒ¨ç½²æ•°é‡ã€‚



**ç»Ÿä¸€é€šä¿¡åè®®ï¼šè§£å†³ä¸åŒç­–ç•¥æ¨¡å‹çš„ä½æˆæœ¬å¿«é€Ÿè¿­ä»£é—®é¢˜**



ä¸åŒç­–ç•¥æ¨¡å‹å¯¹ç‰¹å¾/é‡‡æ ·Embeddingçš„å¤„ç†æ–¹å¼éƒ½æœ‰æ‰€ä¸åŒï¼Œå¦‚æœæ”¾åœ¨æ¡†æ¶å±‚è¿›è¡Œé€‚é…ï¼Œæ—¶é—´æˆæœ¬å’ŒäººåŠ›æˆæœ¬éƒ½å¾ˆé«˜ï¼Œå½±å“æ¨¡å‹çš„å¿«é€Ÿè¿­ä»£ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åˆ¶å®šäº†ä¸»è¿›ç¨‹\-\>å­è¿›ç¨‹\-\>Pythoné€»è¾‘å…¨æµç¨‹çš„ç»Ÿä¸€é€šä¿¡åè®®ï¼Œé€šè¿‡æ ‡å‡†åŒ–ã€è§„èŒƒåŒ–çš„é€šä¿¡æ•°æ®æ ¼å¼ï¼Œå°†ç‰¹å¾/é‡‡æ ·Embeddingæ•°æ®é€å±‚ä¼ è¾“åˆ°å­è¿›ç¨‹Pythoné€»è¾‘ä¸­ï¼Œè€Œå­è¿›ç¨‹Pythoné€»è¾‘ä¸­æ‰ä¼šçœŸæ­£æ‰§è¡Œæ¨¡å‹å®šåˆ¶åŒ–é€»è¾‘ï¼Œç®—æ³•åŒå­¦å¯ä»¥æŒ‰éœ€ä¿®æ”¹ï¼Œå¹¶ä½œä¸ºæ¨¡å‹çš„ä¸€éƒ¨åˆ†è¢«å­è¿›ç¨‹åŠ è½½ï¼Œä»è€Œä¿è¯åœ¨æœåŠ¡æ¡†æ¶å±‚é¢ç¨³å®šä¸å˜çš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€æ”¯æŒä¸åŒç­–ç•¥æ¨¡å‹çš„å¿«é€Ÿè¿­ä»£ã€‚



## 4 æ€»ç»“å’Œå±•æœ›


å›¾ç¥ç»ç½‘ç»œä½œä¸ºå›¾ç»“æ„æ•°æ®å»ºæ¨¡æ–¹æ³•ï¼Œåœ¨æœæ¨å¹¿é¢†åŸŸå±•ç°å‡ºå·¨å¤§æ½œåŠ›ï¼Œä¸šç•Œå¤´éƒ¨å…¬å¸å‡ç»“åˆå„è‡ªä¸šåŠ¡ç‰¹ç‚¹è‡ªå»ºå›¾å¼•æ“å’Œå›¾æŠ€æœ¯è½åœ°åº”ç”¨ã€‚



æœ¬æ–‡ä¸»è¦ä»‹ç»å¤§è§„æ¨¡å›¾æ¡†æ¶åœ¨å¤–å–å¹¿å‘Šåœºæ™¯çš„è½åœ°ã€‚åŸºäºå¯¹å¤–å–æœç´¢å¹¿å‘Šåœºæ™¯åˆ†æï¼Œæå‡ºæœç´¢æ¨èä¸šåŠ¡è§£å†³LBSåœºæ™¯ä¸‹å¼±ä¾›ç»™é—®é¢˜ã€‚æœç´¢æ¨èä¸šåŠ¡é¢ä¸´ç€å¤šæ¸ é“ã€å³æ—¶åŒ–çš„æŒ‘æˆ˜ã€‚æˆ‘ä»¬æå‡ºå¤šåœºæ™¯å¼‚æ„å¤§å›¾ï¼Œé€šè¿‡å•åœºæ™¯ç²¾ç»†åŒ–å»ºæ¨¡\-\>å¤§å›¾é¢„è®­ç»ƒ\+ä¸‹æ¸¸ä»»åŠ¡å¾®è°ƒ\-\>å¤§å›¾é¢„è®­ç»ƒ\+ä¸‹æ¸¸ä»»åŠ¡Graph Soft Promptè§£å†³å¤šæ¸ é“é—®é¢˜ï¼Œå¼‚æ„å›¾åœ¨çº¿å»ºæ¨¡é€šè¿‡åŸºäºSessionlevelçš„åŠ¨æ€å›¾å»ºæ¨¡ç”¨æˆ·éœ€æ±‚å˜åŒ–å…³ç³»ã€‚



ä¸ºäº†æ»¡è¶³äº¿èŠ‚ç‚¹ç™¾äº¿è¾¹å¤§è§„æ¨¡å›¾ç«¯åˆ°ç«¯è®­ç»ƒã€åœ¨çº¿å®æ—¶æ¨ç†ï¼ŒåŸºäºå¼€æºDGLæ¡†æ¶ç ”å‘äº†ä¸€å¥—å¤§è§„æ¨¡å›¾ç¥ç»ç½‘ç»œçš„è®­ç»ƒã€æ¨ç†æ¡†æ¶GraphETï¼Œæ”¯æŒç¦»çº¿å›¾è®­ç»ƒæµç¨‹Piplineï¼ˆå›¾æ„å»º/é‡‡æ ·/èšåˆ/ç«¯åˆ°ç«¯å»ºæ¨¡ï¼‰ï¼Œ DGL Servingåœ¨çº¿æ¨ç†ï¼Œæ–¹ä¾¿å®ç°å­¦æœ¯ç•Œä»»æ„å¤æ‚å›¾æ¨¡å‹å·¥ç¨‹åœ¨çº¿åŒ–ã€‚



æœªæ¥æˆ‘ä»¬è¿˜å°†åœ¨ä»¥ä¸‹æ–¹å‘ç»§ç»­è¿›è¡Œæ¢ç´¢ï¼š



* å€Ÿé‰´GPTæ€æƒ³ï¼Œæœæ¨å¹¿é¢†åŸŸé€šç”¨Graphæ¨¡å‹å»ºè®¾åŠè½åœ°ï¼›
* æ„å»ºé¢†åŸŸå¤§å›¾ï¼Œå¼•æ“éœ€è¦æ”¯æ’‘åƒäº¿è¾¹ã€å¤æ‚ç±»å‹æ„å›¾èƒ½åŠ›ï¼›
* å›¾åœ¨çº¿å¼•æ“åŠ é€ŸåŠæ”¯æ’‘æ›´å¤§è§„æ¨¡å›¾åœ¨çº¿æ¨ç†æ¡†æ¶å»ºè®¾ã€‚


## 5 å‚è€ƒèµ„æ–™


* \[1\] Daniel C Fain and Jan O Pedersen. 2006. Sponsored search: A brief history.Bulletin\-American Society For Information Science And Technology 32, 2 \(2006\).
* \[2\] Grover A, Leskovec J. node2vec: Scalable feature learning for networks\[C\]//Proceedings of the 22nd ACM SIGKDD international conference on Knowledge discovery and data mining. 2016: 855\-864.
* \[3\] Procopio L, Tripodi R, Navigli R. SGL: Speaking the graph languages of semantic parsing via multilingual translation\[C\]//Proceedings of the 2021 Conference of the North American Chapter of the Association for Computational Linguistics: Human Language Technologies. 2021: 325\-337.
* \[4\] Lu Y, Jiang X, Fang Y, et al. Learning to pre\-train graph neural networks\[C\]//Proceedings of the AAAI conference on artificial intelligence. 2021, 35\(5\): 4276\-4284.
* \[5\] Velickovic P, Cucurull G, Casanova A, et al. Graph attention networks\[J\]. stat, 2017, 1050\(20\): 10\-48550.
* \[6\] Han H, Zhang M, Hou M, et al. STGCN: a spatial\-temporal aware graph learning method for POI recommendation\[C\]//2020 IEEE International Conference on Data Mining \(ICDM\). IEEE, 2020: 1052\-1057.
* \[7\] Sun X, Cheng H, Li J, et al. All in One: Multi\-Task Prompting for Graph Neural Networks\[J\]. 2023.
* \[8\] Wang M Y. Deep graph library: Towards efficient and scalable deep learning on graphs\[C\]//ICLR workshop on representation learning on graphs and manifolds. 2019.
* \[9\] Lin Z, Li C, Miao Y, et al. Pagraph: Scaling gnn training on large graphs via computation\-aware caching\[C\]//Proceedings of the 11th ACM Symposium on Cloud Computing. 2020: 401\-415.
* \[10\] Zhou X, Wang R, Li H, et al. LEAD\-ID: Language\-Enhanced Denoising and Intent Distinguishing Graph Neural Network for Sponsored Search Broad Retrievals\[C\]//Proceedings of the 32nd ACM International Conference on Information and Knowledge Management. 2023: 4460\-4464.
* \[11\] Sun X, Cheng H, Li J, et al. All in One: Multi\-Task Prompting for Graph Neural Networks\[J\]. 2023.




