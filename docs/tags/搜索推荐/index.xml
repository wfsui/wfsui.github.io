<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>搜索推荐 on 大峰哥</title>
    <link>https://wfsui.github.io/tags/%E6%90%9C%E7%B4%A2%E6%8E%A8%E8%8D%90/</link>
    <description>Recent content in 搜索推荐 on 大峰哥</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <copyright>© Copyright notice</copyright>
    <lastBuildDate>Sat, 21 Oct 2023 02:40:15 +0000</lastBuildDate><atom:link href="https://wfsui.github.io/tags/%E6%90%9C%E7%B4%A2%E6%8E%A8%E8%8D%90/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>美团外卖推荐关于用户新颖体验优化的技术探索</title>
      <link>https://wfsui.github.io/posts/%E7%BE%8E%E5%9B%A2%E5%A4%96%E5%8D%96%E6%8E%A8%E8%8D%90%E5%85%B3%E4%BA%8E%E7%94%A8%E6%88%B7%E6%96%B0%E9%A2%96%E4%BD%93%E9%AA%8C%E4%BC%98%E5%8C%96%E7%9A%84%E6%8A%80%E6%9C%AF%E6%8E%A2%E7%B4%A2/</link>
      <pubDate>Sat, 21 Oct 2023 02:40:15 +0000</pubDate>
      
      <guid>https://wfsui.github.io/posts/%E7%BE%8E%E5%9B%A2%E5%A4%96%E5%8D%96%E6%8E%A8%E8%8D%90%E5%85%B3%E4%BA%8E%E7%94%A8%E6%88%B7%E6%96%B0%E9%A2%96%E4%BD%93%E9%AA%8C%E4%BC%98%E5%8C%96%E7%9A%84%E6%8A%80%E6%9C%AF%E6%8E%A2%E7%B4%A2/</guid>
      <description>1 背景介绍 1.1 为什么要优化用户新颖性？ 2022年初，美团外卖搜索推荐技术团队通过内部访谈、外部用研，发现用户对外卖首页Feed推荐的新颖性问题诟病较多：首页Feed推荐了过多的复购复点商家，无法满足用户尝新的诉求。
我们通过分析，发现主要原因是：历史上策略优化[1]目标都聚焦在提升交易效率（RPM）和全局GMV上，对用户兴趣的探索不足，因而在外卖首页Feed的前几位，都是为用户重复曝光了过多复购复点商家，而现有策略也只是对历史购买商家进行降权排序，效果极其有限。随着业务的发展，如果首页Feed推荐的优化目标仍旧只关注交易效率而忽视用户新颖体验，长此以往用户难以跳出“信息茧房”[2]，其浏览体验也会变得越来越差。因此，我们将用户新颖性加入了外卖首页Feed推荐的优化目标中。
1.2 外卖场景下新颖性推荐的重要性 业界很多电商平台的推荐系统，候选池动辄几亿~几十亿不等，待分发内容非常多，重点都是做相关性优化以提升推荐准确度，往往直接过滤掉用户曾经看过、买过的内容商品，新颖性问题并不突出。但在外卖场景下，候选商家少、用户复购/下单频次高，决定了“直接过滤用户看过、下单过”的策略既不现实、也不合理。
一方面，受LBS约束，外卖候选商家量级在几百~几千，曝光商家既要匹配用户饮食习惯，又要考虑用户复购的需求，因而难免重复曝光部分商家；另一方面，外卖用户下单频次很高，不希望一天或者几天之内反复品尝同样的食物，用户有着很强的尝新诉求。故而新颖性推荐是用户体验的核心问题之一，平衡好用户的复购、尝新意图，显得极为关键。
2 问题和挑战 新颖性推荐的目标是优化用户新颖体验，和首页Feed一直以来的优化目标（交易效率RPM、全局GMV）区别较大。具体到餐饮场景，优化新颖性主要的问题如下：
对用户来说，什么是新颖性？即如何将用户的直接感受，量化为准确的新颖性定义。 新颖性的优化目标如何设计？即如何将新颖定义转化为推荐系统的观测指标，再进一步，如何量化系统观测指标和用户新颖感受之间的变化关系？ 新颖性问题是否存在解决的终态？即对比持续迭代的效率问题，新颖性问题是能被彻底解决，还是需要持续迭代。 3 新颖性概述 美团外卖推荐系统评估指标，长期以来主要包含效率指标（UV_CTR、UV_CXR、UV_RPM等）、生态指标（主题曝光占比、商品曝光占比、闪购曝光占比等）、用户体验指标（多样性）等多个方面。但是要优化新颖体验，必须要有科学合理、策略可干预的新颖性指标，而这又依赖于“新颖”的定义。
3.1 什么是用户新颖性 首先，我们要回答“对用户来说，什么是新颖的”。外卖首页Feed，承载了商家、商品、主题卡片等多种异构流量的分发，其中用户看到的卡片90%左右都是商家卡片，为此，我们认为用户新颖性意味着其看到的商家是否新颖。</description>
    </item>
    
    <item>
      <title>美团外卖智能陪伴型导购的探索与实践</title>
      <link>https://wfsui.github.io/posts/%E7%BE%8E%E5%9B%A2%E5%A4%96%E5%8D%96%E6%99%BA%E8%83%BD%E9%99%AA%E4%BC%B4%E5%9E%8B%E5%AF%BC%E8%B4%AD%E7%9A%84%E6%8E%A2%E7%B4%A2%E4%B8%8E%E5%AE%9E%E8%B7%B5/</link>
      <pubDate>Sat, 21 Oct 2023 02:40:15 +0000</pubDate>
      
      <guid>https://wfsui.github.io/posts/%E7%BE%8E%E5%9B%A2%E5%A4%96%E5%8D%96%E6%99%BA%E8%83%BD%E9%99%AA%E4%BC%B4%E5%9E%8B%E5%AF%BC%E8%B4%AD%E7%9A%84%E6%8E%A2%E7%B4%A2%E4%B8%8E%E5%AE%9E%E8%B7%B5/</guid>
      <description>1 背景 1.1 什么是外卖搜索导购？ 搜索导购是外卖搜索中的个性化搜索词建议模块的统称，在搜索路径中的各处为用户提供引导，提升用户的选购效率。下面按照用户使用外卖搜索的路径来介绍搜索导购的各个模块：① 用户进入外卖首页，美团在顶部搜索框的内部和下方分别提供搜索建议，即框内词和框下词；② 用户点击搜索框会进入到搜索引导页中，我们在历史搜索下方的搜索发现中提供搜索建议；③ 用户在搜索框中主动输入搜索词后，将会唤起搜索词联想功能，即搜索SUG，为用户提供补全搜索词的建议；④ 用户发起搜索后将进入到搜索结果页。
整体流程如下图1所示，其中红框部分即为本文讨论的重点：框内词、框下词以及搜索发现模块。
1.2 为什么要做智能陪伴型的外卖搜索导购？ 在餐饮领域，用户体验永远是线下商家优化的重点。其中，导购服务直接影响着用户的购前决策，对商家的转化率和营业额有着重大的意义。像海底捞等商家甚至主打极致的用户体验，通过无微不至的店员服务让用户感到“时时刻刻被关怀”。外卖服务将餐饮消费场景从线下搬到了线上，用户通过搜索/推荐场景找到自己感兴趣的商家和菜品，但相较于线下环境中有“时刻关怀着”的店员，线上这个过程显得较为“被动和冰冷”。
基于以上灵感，我们决定从2022年开始着力打造智能陪伴型导购。在用户使用搜索/推荐时，我们围绕用户表现出的兴趣主动提供更智能的搜索建议，更好地承接用户实时变化的意图和被激发出的灵感。同时，我们也解决了用户打字输入成本高、不知道附近的供给能否满足他们的需求以及不知道如何清晰表达他们的需求等三个方面的痛点。
2 问题与挑战 如何将智能陪伴型导购这一充满“赛博朋克”感的构想在美团外卖场景进行落地呢？我们遇到了以下的挑战：
挑战1：线下的导购追求一对一的极致实时的个性化体验，而外卖搜索的导购如何由被动导购（用户手动刷新才会触发导购系统的刷新）变为主动导购（智能感知和判断用户在什么时间、什么场景需要针对性的刷新导购），强化用户实时的个性化体验，智能感知和判断用户每一个需要服务的场景？解决方案：借助美团自研的Alita端智能[1][2]的意图感知能力，智能判断何时需要针对性地刷新。同时，对模型引入实时异构行为序列进行建模，打造端云结合排序模型，感知用户实时多变的兴趣。 挑战2：导购的优化除了满足用户体验之外，还需要为整体的转化目标负责，如何让导购的优化与下游场景/整体场景的优化目标保持一致？解决方案：对全场景数据进行统一建模，打造基于自监督学习的统一模型，在对样本进行“无效”过滤以及归因的基础上，同时联动搜索结果页进行全链路的多目标效率优化。 挑战3：如何像基于大模型对话入口一样将用户在物理世界的行为转化为机器/算法可以理解的信息，并像真人导购一样和用户“对话”？解决方案：我们后续计划通过对用户行为的理解，尝试在适当时机主动将用户引导到大模型的对话入口，满足其深度对话的需求。 3 主要工作 我们将以上提到的问题和挑战作为主线，分为两个章节进行详细介绍。其中在3.</description>
    </item>
    
    <item>
      <title>交互式推荐在外卖场景的探索与应用</title>
      <link>https://wfsui.github.io/posts/%E4%BA%A4%E4%BA%92%E5%BC%8F%E6%8E%A8%E8%8D%90%E5%9C%A8%E5%A4%96%E5%8D%96%E5%9C%BA%E6%99%AF%E7%9A%84%E6%8E%A2%E7%B4%A2%E4%B8%8E%E5%BA%94%E7%94%A8/</link>
      <pubDate>Thu, 24 Aug 2023 02:40:24 +0000</pubDate>
      
      <guid>https://wfsui.github.io/posts/%E4%BA%A4%E4%BA%92%E5%BC%8F%E6%8E%A8%E8%8D%90%E5%9C%A8%E5%A4%96%E5%8D%96%E5%9C%BA%E6%99%AF%E7%9A%84%E6%8E%A2%E7%B4%A2%E4%B8%8E%E5%BA%94%E7%94%A8/</guid>
      <description>1. 背景 1.1 什么是交互式推荐？ 交互式推荐是一种互动式实时推荐产品模块，主要通过理解用户需求、以互动的方式进行推荐。交互式推荐由Youtube在2018年提出[1]，主要用于解决推荐系统的延迟[2]和与用户互动偏弱的问题。
从2021年下半年开始，美团外卖推荐技术团队在外卖首页Feed上持续进行探索，2022上半年完成全量。具体流程如视频1所示：用户从首页Feed进入商家详情页并退出之后，动态地插入新的推荐内容到用户推荐列表中。其主要优势是根据用户的实时需求动态插入卡片进行反馈，进而增强用户的使用体验。
视频1 外卖首页Feed中的交互式推荐形态
1.2 为什么需要交互式推荐？ 我们发现，外卖首页Feed在用户即时兴趣的捕捉和反馈上存在痛点，“对比型”用户的选购效率和体验不佳。外卖首页Feed作为泛意图用户主要选购场景之一，用户在浏览到成单过程中通常需要进行一番对比、才能逐步收敛意图，然后做出最终决策。
但受限于长列表的翻页模式，首页Feed根据用户需求实时调整推荐结果的能力不足。具体表现在，一部分用户的浏览深度不足一页，推荐系统没有额外的机会根据用户兴趣调整推荐结果。另一部分用户虽然有较深的浏览深度，但需要等到翻页时推荐系统才能重新理解用户意图，实时性不足。
业界优化这类问题的主要产品形态有交互式推荐、动态翻页、端上重排这三种。交互式推荐由于是在用户可视范围内插入，用户感知较强；后两种的主流形态是在用户不可见区域更新推荐，用户感知相对较弱。其实，这三种形态在美团外卖均有尝试，本文重点聚焦于交互式推荐的介绍。
2. 问题与挑战 我们在外卖场景搭建交互式推荐时，主要面临以下难点和挑战：
不同于传统的推荐系统，交互式推荐是由用户触发的推荐，外卖场景下，如何更好的匹配用户实时需求，搭建出一套适用于外卖的、基于端智能框架的推荐系统是我们首要解决的问题。 作为首页Feed内部的个性化模块，交互式推荐只做单一模块的优化是不够的，还要考虑首页Feed整体的访购效率。那么，如何选择优化目标，以及如何衡量效果和收益，是摆在我们面前的第二个问题。 主流的Feed形态是双列商品瀑布流，但外卖首页Feed是以商家为主的单列列表，如何避免交互在用户的选择路径上带来的“干扰感”，在合适的时机触发交互式推荐，是我们面临的第三个问题。 交互式推荐具有动态插入效果，用户对于推荐结果好与坏的感受会更加明显。如何更好理解用户即时意图，如何利用首页Feed列表推荐结果优化交互式推荐的单商家卡片，是我们面临的第四个问题。 本文将从以上四个方面，详细介绍外卖首页Feed交互式推荐从0到1搭建的全过程，以及针对以上问题的解决思路。</description>
    </item>
    
    <item>
      <title>美团外卖推荐情境化智能流量分发的实践与探索</title>
      <link>https://wfsui.github.io/posts/%E7%BE%8E%E5%9B%A2%E5%A4%96%E5%8D%96%E6%8E%A8%E8%8D%90%E6%83%85%E5%A2%83%E5%8C%96%E6%99%BA%E8%83%BD%E6%B5%81%E9%87%8F%E5%88%86%E5%8F%91%E7%9A%84%E5%AE%9E%E8%B7%B5%E4%B8%8E%E6%8E%A2%E7%B4%A2/</link>
      <pubDate>Wed, 05 Jul 2023 03:14:26 +0000</pubDate>
      
      <guid>https://wfsui.github.io/posts/%E7%BE%8E%E5%9B%A2%E5%A4%96%E5%8D%96%E6%8E%A8%E8%8D%90%E6%83%85%E5%A2%83%E5%8C%96%E6%99%BA%E8%83%BD%E6%B5%81%E9%87%8F%E5%88%86%E5%8F%91%E7%9A%84%E5%AE%9E%E8%B7%B5%E4%B8%8E%E6%8E%A2%E7%B4%A2/</guid>
      <description>1. 引言 美团外卖推荐服务了数亿用户，通过持续优化用户体验和流量分发精准性，为用户提供品质生活，“帮大家吃得更好，生活更好”。对于“用户”，大家可能会有不同的理解，通常的理解是用户即是自然人。业界主要的推荐场景，如淘宝首页猜你喜欢、抖音快手 Feeds 流推荐等大部分也是这么认为的，在这些电商、短视频等业务中，用户无论何时何地使用推荐服务，他们的需求是大体统一的，商品、信息、视频等供给也是一致的。
但实际上，在美团外卖场景下，用户不仅是自然人，更是需求的集合。需求是与情境依存的，也就是有情境就有需求。美团外卖在不同的时间、空间以及其他更广义的环境下，用户需求、商家供给等都有显著区别。因此，本地化、餐饮习惯、即时履约共同构建了美团外卖多种多样的情境，进而衍生出用户多种多样的需求集合，推荐算法情境化可以帮助算法更好地理解并满足不同情境下用户需求。
2. 问题与挑战 外卖场景具有很强的地理位置和就餐文化约束，用户在不同地点（如公司、住所）的需求有较大差异。而且，所处时间也是决定用户下单的一个关键因素。以北京某地区高消费用户为例，工作日和周末在成单品类、成单价格、成单商家配送距离上有着明显的不同。如下图 1 所示，工作日与周末用户在口味、心态上有明显变化，工作日多为单人餐，以饭类套餐、轻食、米线为主，更加适应工作时的快节奏；而在周末，用户会适当犒劳自己、兼顾家人，倾向于选择更适合多人就餐的烧烤、韩国料理、火锅。从图 1 也可以发现，从工作日到周末时，用户的成单价格中位数由 30 元提高至 50 元，能够接受的配送距离也在变长。
美团外卖推荐需要满足“用户 X 时间 X 地点”等情境下的需求总和，应对需求的不断拓展和演化。为了更好的理解我们所面对的用户需求，如下图 2 所示，将其定义到一个魔方内（Magic Cube），用户、时间和地点是魔方的三个维度。其中，魔方中的每个点，如图 2 中黄色点，代表一个用户在一个特定情境下的需求；魔方中的每个小立方体，如图 2 中黄色立方体，代表一组相似用户在一组相近情境下的需求。此外，在问题定义上，为了支持情境维度的进一步扩展，我们使用超立方体（Hyper Cube）来定义更多维度的用户需求。</description>
    </item>
    
    <item>
      <title>美团搜索粗排优化的探索与实践</title>
      <link>https://wfsui.github.io/posts/%E7%BE%8E%E5%9B%A2%E6%90%9C%E7%B4%A2%E7%B2%97%E6%8E%92%E4%BC%98%E5%8C%96%E7%9A%84%E6%8E%A2%E7%B4%A2%E4%B8%8E%E5%AE%9E%E8%B7%B5/</link>
      <pubDate>Fri, 25 Nov 2022 03:24:08 +0000</pubDate>
      
      <guid>https://wfsui.github.io/posts/%E7%BE%8E%E5%9B%A2%E6%90%9C%E7%B4%A2%E7%B2%97%E6%8E%92%E4%BC%98%E5%8C%96%E7%9A%84%E6%8E%A2%E7%B4%A2%E4%B8%8E%E5%AE%9E%E8%B7%B5/</guid>
      <description>1. 前言 众所周知，在搜索、推荐、广告等大规模工业界应用领域，为了平衡性能和效果，排序系统普遍采用级联架构[1,2]，如下图 1 所示。以美团搜索排序系统为例，整个排序分为粗排、精排、重排和混排层；粗排位于召回和精排之间，需要从千级别候选 item 集合中筛选出百级别 item 集合送给精排层。
从美团搜索排序全链路视角审视粗排模块，目前粗排层优化存在如下几个挑战点：
样本选择偏差：级联排序系统下，粗排离最后的结果展示环节较远，导致粗排模型离线训练样本空间与待预测的样本空间存在较大的差异，存在严重的样本选择偏差。 粗排精排联动：粗排处于召回和精排之间，粗排需要更多获取和利用后续链路的信息来提升效果。 性能约束：线上粗排预测的候选集远远高于精排模型，然而实际整个搜索系统对性能有严格的要求，导致粗排需要重点关注预测性能。 本文将围绕上述挑战点来分享美团搜索粗排层优化的相关探索与实践，其中样本选择偏差问题我们放在精排联动问题中一起解决。本文主要分成三个部分：第一部分会简单介绍美团搜索排序粗排层的演进路线；第二部分介绍粗排优化的相关探索与实践，其中第一个工作是采用知识蒸馏和对比学习使精排和粗排联动来优化粗排效果，第二个工作是考虑粗排性能和效果 trade-off 的粗排优化，相关工作均已全量上线，且效果显著；最后是总结与展望部分，希望这些内容对大家有所帮助和启发。
2. 粗排演进路线 美团搜索的粗排技术演进分为以下几个阶段：
2016 年：基于相关性、质量度、转化率等信息进行线性加权，这种方法简单但是特征的表达能力较弱，权重人工确定，排序效果存在很大的提升空间。 2017 年：采用基于机器学习的简单 LR 模型进行 Pointwise 预估排序。 2018 年：采用基于向量内积的双塔模型，两侧分别输入查询词、用户以及上下文特征和商户特征，经过深度网络计算后，分别产出用户&amp;amp;查询词向量和商户向量，再通过内积计算得到预估分数进行排序。该方法可以提前把商户向量计算保存好，所以在线预测快，但是两侧信息的交叉能力有限。 2019 年：为了解决双塔模型无法很好地建模交叉特征的问题，将双塔模型的输出作为特征与其他交叉特征通过 GBDT 树模型进行融合。 2020 年至今：由于算力的提升，开始探索 NN 端到端粗排模型并且持续迭代 NN 模型。 现阶段，工业界粗排模型常用的有双塔模型，比如腾讯[3]和爱奇艺[4]；交互式 NN 模型，比如阿里巴巴[1,2]。下文主要介绍美团搜索在粗排升级为 NN 模型过程中的相关优化工作，主要包括粗排效果优化、效果&amp;amp;性能联合优化两个部分。</description>
    </item>
    
  </channel>
</rss>
